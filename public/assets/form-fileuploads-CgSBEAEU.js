import{g as Mt}from"./app-COk2rsMN.js";import{$ as Bt}from"./dropzone-q8q1zJN8.js";const Jr=e=>e instanceof HTMLElement,ei=(e,t=[],n=[])=>{const r={...e},i=[],a=[],s=()=>({...r}),l=()=>{const E=[...i];return i.length=0,E},o=()=>{const E=[...a];a.length=0,E.forEach(({type:T,data:v})=>{u(T,v)})},u=(E,T,v)=>{if(v&&!document.hidden){a.push({type:E,data:T});return}m[E]&&m[E](T),i.push({type:E,data:T})},c=(E,...T)=>I[E]?I[E](...T):null,f={getState:s,processActionQueue:l,processDispatchQueue:o,dispatch:u,query:c};let I={};t.forEach(E=>{I={...E(r),...I}});let m={};return n.forEach(E=>{m={...E(u,c,r),...m}}),f},ti=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},ce=(e,t)=>{for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])},Be=e=>{const t={};return ce(e,n=>{ti(t,n,e[n])}),t},ge=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},ni="http://www.w3.org/2000/svg",ri=["svg","path"],Tn=e=>ri.includes(e),St=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=Tn(e)?document.createElementNS(ni,e):document.createElement(e);return t&&(Tn(e)?ge(r,"class",t):r.className=t),ce(n,(i,a)=>{ge(r,i,a)}),r},ii=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},si=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),ai=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),oi=typeof window<"u"&&typeof window.document<"u",lr=()=>oi,li=lr()?St("svg"):{},ci="children"in li?e=>e.children.length:e=>e.childNodes.length,cr=(e,t,n,r)=>{const i=n[0]||e.left,a=n[1]||e.top,s=i+e.width,l=a+e.height*(r[1]||1),o={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:a,right:s,bottom:l}};return t.filter(u=>!u.isRectIgnored()).map(u=>u.rect).forEach(u=>{hn(o.inner,{...u.inner}),hn(o.outer,{...u.outer})}),Rn(o.inner),o.outer.bottom+=o.element.marginBottom,o.outer.right+=o.element.marginRight,Rn(o.outer),o},hn=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Rn=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},xe=e=>typeof e=="number",ui=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,di=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,a=0,s=!1;const u=Be({interpolate:(c,f)=>{if(s)return;if(!(xe(r)&&xe(i))){s=!0,a=0;return}const I=-(i-r)*e;a+=I/n,i+=a,a*=t,ui(i,r,a)||f?(i=r,a=0,s=!0,u.onupdate(i),u.oncomplete(i)):u.onupdate(i)},target:{set:c=>{if(xe(c)&&!xe(i)&&(i=c),r===null&&(r=c,i=c),r=c,i===r||typeof r>"u"){s=!0,a=0,u.onupdate(i),u.oncomplete(i);return}s=!1},get:()=>r},resting:{get:()=>s},onupdate:c=>{},oncomplete:c=>{}});return u},fi=e=>e<.5?2*e*e:-1+(4-2*e)*e,Ei=({duration:e=500,easing:t=fi,delay:n=0}={})=>{let r=null,i,a,s=!0,l=!1,o=null;const c=Be({interpolate:(f,I)=>{s||o===null||(r===null&&(r=f),!(f-r<n)&&(i=f-r-n,i>=e||I?(i=1,a=l?0:1,c.onupdate(a*o),c.oncomplete(a*o),s=!0):(a=i/e,c.onupdate((i>=0?t(l?1-a:a):0)*o))))},target:{get:()=>l?0:o,set:f=>{if(o===null){o=f,c.onupdate(f),c.oncomplete(f);return}f<o?(o=1,l=!0):(l=!1,o=f),s=!1,r=null}},resting:{get:()=>s},onupdate:f=>{},oncomplete:f=>{}});return c},On={spring:di,tween:Ei},pi=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,a=typeof r=="object"?{...r}:{};return On[i]?On[i](a):null},an=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(a=>{let s=a,l=()=>n[a],o=u=>n[a]=u;typeof a=="object"&&(s=a.key,l=a.getter||l,o=a.setter||o),!(i[s]&&!r)&&(i[s]={get:l,set:o})})})},_i=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},a=[];return ce(e,(s,l)=>{const o=pi(l);if(!o)return;o.onupdate=c=>{t[s]=c},o.target=i[s],an([{key:s,setter:c=>{o.target!==c&&(o.target=c)},getter:()=>t[s]}],[n,r],t,!0),a.push(o)}),{write:s=>{let l=document.hidden,o=!0;return a.forEach(u=>{u.resting||(o=!1),u.interpolate(s,l)}),o},destroy:()=>{}}},Ii=e=>(t,n)=>{e.addEventListener(t,n)},gi=e=>(t,n)=>{e.removeEventListener(t,n)},mi=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:a})=>{const s=[],l=Ii(a.element),o=gi(a.element);return r.on=(u,c)=>{s.push({type:u,fn:c}),l(u,c)},r.off=(u,c)=>{s.splice(s.findIndex(f=>f.type===u&&f.fn===c),1),o(u,c)},{write:()=>!0,destroy:()=>{s.forEach(u=>{o(u.type,u.fn)})}}},Ti=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{an(e,n,t)},Ae=e=>e!=null,hi={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Ri=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const a={...t},s={};an(e,[n,r],t);const l=()=>[t.translateX||0,t.translateY||0],o=()=>[t.scaleX||0,t.scaleY||0],u=()=>i.rect?cr(i.rect,i.childViews,l(),o()):null;return n.rect={get:u},r.rect={get:u},e.forEach(c=>{t[c]=typeof a[c]>"u"?hi[c]:a[c]}),{write:()=>{if(Oi(s,t))return Ai(i.element,t),Object.assign(s,{...t}),!0},destroy:()=>{}}},Oi=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},Ai=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:a,scaleY:s,rotateX:l,rotateY:o,rotateZ:u,originX:c,originY:f,width:I,height:m})=>{let E="",T="";(Ae(c)||Ae(f))&&(T+=`transform-origin: ${c||0}px ${f||0}px;`),Ae(n)&&(E+=`perspective(${n}px) `),(Ae(r)||Ae(i))&&(E+=`translate3d(${r||0}px, ${i||0}px, 0) `),(Ae(a)||Ae(s))&&(E+=`scale3d(${Ae(a)?a:1}, ${Ae(s)?s:1}, 1) `),Ae(u)&&(E+=`rotateZ(${u}rad) `),Ae(l)&&(E+=`rotateX(${l}rad) `),Ae(o)&&(E+=`rotateY(${o}rad) `),E.length&&(T+=`transform:${E};`),Ae(t)&&(T+=`opacity:${t};`,t===0&&(T+="visibility:hidden;"),t<1&&(T+="pointer-events:none;")),Ae(m)&&(T+=`height:${m}px;`),Ae(I)&&(T+=`width:${I}px;`);const v=e.elementCurrentStyle||"";(T.length!==v.length||T!==v)&&(e.style.cssText=T,e.elementCurrentStyle=T)},Di={styles:Ri,listeners:mi,animations:_i,apis:Ti},An=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),Ee=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:a=()=>{},destroy:s=()=>{},filterFrameActionsForChild:l=(m,E)=>E,didCreateView:o=()=>{},didWriteView:u=()=>{},ignoreRect:c=!1,ignoreRectUpdate:f=!1,mixins:I=[]}={})=>(m,E={})=>{const T=St(e,`filepond--${t}`,n),v=window.getComputedStyle(T,null),D=An();let b=null,B=!1;const x=[],V=[],X={},te={},N=[i],Y=[r],K=[s],z=()=>T,j=()=>x.concat(),ue=()=>X,A=d=>(p,g)=>p(d,g),J=()=>b||(b=cr(D,x,[0,0],[1,1]),b),h=()=>v,L=()=>{b=null,x.forEach(g=>g._read()),!(f&&D.width&&D.height)&&An(D,T,v);const p={root:Ne,props:E,rect:D};Y.forEach(g=>g(p))},q=(d,p,g)=>{let R=p.length===0;return N.forEach(G=>{G({props:E,root:Ne,actions:p,timestamp:d,shouldOptimize:g})===!1&&(R=!1)}),V.forEach(G=>{G.write(d)===!1&&(R=!1)}),x.filter(G=>!!G.element.parentNode).forEach(G=>{G._write(d,l(G,p),g)||(R=!1)}),x.forEach((G,S)=>{G.element.parentNode||(Ne.appendChild(G.element,S),G._read(),G._write(d,l(G,p),g),R=!1)}),B=R,u({props:E,root:Ne,actions:p,timestamp:d}),R},k=()=>{V.forEach(d=>d.destroy()),K.forEach(d=>{d({root:Ne,props:E})}),x.forEach(d=>d._destroy())},ae={element:{get:z},style:{get:h},childViews:{get:j}},Z={...ae,rect:{get:J},ref:{get:ue},is:d=>t===d,appendChild:ii(T),createChildView:A(m),linkView:d=>(x.push(d),d),unlinkView:d=>{x.splice(x.indexOf(d),1)},appendChildView:si(T,x),removeChildView:ai(T,x),registerWriter:d=>N.push(d),registerReader:d=>Y.push(d),registerDestroyer:d=>K.push(d),invalidateLayout:()=>T.layoutCalculated=!1,dispatch:m.dispatch,query:m.query},Xe={element:{get:z},childViews:{get:j},rect:{get:J},resting:{get:()=>B},isRectIgnored:()=>c,_read:L,_write:q,_destroy:k},je={...ae,rect:{get:()=>D}};Object.keys(I).sort((d,p)=>d==="styles"?1:p==="styles"?-1:0).forEach(d=>{const p=Di[d]({mixinConfig:I[d],viewProps:E,viewState:te,viewInternalAPI:Z,viewExternalAPI:Xe,view:Be(je)});p&&V.push(p)});const Ne=Be(Z);a({root:Ne,props:E});const ct=ci(T);return x.forEach((d,p)=>{Ne.appendChild(d.element,ct+p)}),o(Ne),Be(Xe)},Si=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],a=1e3/n;let s=null,l=null,o=null,u=null;const c=()=>{document.hidden?(o=()=>window.setTimeout(()=>f(performance.now()),a),u=()=>window.clearTimeout(l)):(o=()=>window.requestAnimationFrame(f),u=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{u&&u(),c(),f(performance.now())});const f=I=>{l=o(f),s||(s=I);const m=I-s;m<=a||(s=I-m%a,i.readers.forEach(E=>E()),i.writers.forEach(E=>E(I)))};return c(),f(performance.now()),{pause:()=>{u(l)}}},Se=(e,t)=>({root:n,props:r,actions:i=[],timestamp:a,shouldOptimize:s})=>{i.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:n,props:r,action:l.data,timestamp:a,shouldOptimize:s})),t&&t({root:n,props:r,actions:i,timestamp:a,shouldOptimize:s})},Dn=(e,t)=>t.parentNode.insertBefore(e,t),Sn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),wt=e=>Array.isArray(e),Ge=e=>e==null,yi=e=>e.trim(),Ct=e=>""+e,Pi=(e,t=",")=>Ge(e)?[]:wt(e)?e:Ct(e).split(t).map(yi).filter(n=>n.length),ur=e=>typeof e=="boolean",dr=e=>ur(e)?e:e==="true",De=e=>typeof e=="string",fr=e=>xe(e)?e:De(e)?Ct(e).replace(/[a-z]+/gi,""):0,Tt=e=>parseInt(fr(e),10),yn=e=>parseFloat(fr(e)),nt=e=>xe(e)&&isFinite(e)&&Math.floor(e)===e,Pn=(e,t=1e3)=>{if(nt(e))return e;let n=Ct(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),Tt(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),Tt(n)*t):Tt(n)},Ve=e=>typeof e=="function",Li=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},Ln={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},vi=e=>{const t={};return t.url=De(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},ce(Ln,n=>{t[n]=Mi(n,e[n],Ln[n],t.timeout,t.headers)}),t.process=e.process||De(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Mi=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const a={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(De(t))return a.url=t,a;if(Object.assign(a,t),De(a.headers)){const s=a.headers.split(/:(.+)/);a.headers={header:s[0],value:s[1]}}return a.withCredentials=dr(a.withCredentials),a},wi=e=>vi(e),Ci=e=>e===null,he=e=>typeof e=="object"&&e!==null,bi=e=>he(e)&&De(e.url)&&he(e.process)&&he(e.revert)&&he(e.restore)&&he(e.fetch),Wt=e=>wt(e)?"array":Ci(e)?"null":nt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":bi(e)?"api":typeof e,Ni=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Gi={array:Pi,boolean:dr,int:e=>Wt(e)==="bytes"?Pn(e):Tt(e),number:yn,float:yn,bytes:Pn,string:e=>Ve(e)?e:Ct(e),function:e=>Li(e),serverapi:wi,object:e=>{try{return JSON.parse(Ni(e))}catch{return null}}},Fi=(e,t)=>Gi[t](e),Er=(e,t,n)=>{if(e===t)return e;let r=Wt(e);if(r!==n){const i=Fi(e,n);if(r=Wt(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},Ui=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=Er(r,e,t)}}},Bi=e=>{const t={};return ce(e,n=>{const r=e[n];t[n]=Ui(r[0],r[1])}),Be(t)},xi=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Bi(e)}),bt=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Vi=(e,t)=>{const n={};return ce(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${bt(r,"_").toUpperCase()}`,{value:i})}}}),n},qi=e=>(t,n,r)=>{const i={};return ce(e,a=>{const s=bt(a,"_").toUpperCase();i[`SET_${s}`]=l=>{try{r.options[a]=l.value}catch{}t(`DID_SET_${s}`,{value:r.options[a]})}}),i},Hi=e=>t=>{const n={};return ce(e,r=>{n[`GET_${bt(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},Me={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},on=()=>Math.random().toString(36).substring(2,11),ln=(e,t)=>e.splice(t,1),Yi=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Nt=()=>{const e=[],t=(r,i)=>{ln(e,e.findIndex(a=>a.event===r&&(a.cb===i||!i)))},n=(r,i,a)=>{e.filter(s=>s.event===r).map(s=>s.cb).forEach(s=>Yi(()=>s(...i),a))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...a)=>{t(r,i),i(...a)}})},off:t}},pr=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},zi=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ye=e=>{const t={};return pr(e,t,zi),t},Wi=e=>{e.forEach((t,n)=>{t.released&&ln(e,n)})},Q={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Ie={INPUT:1,LIMBO:2,LOCAL:3},_r=e=>/[^0-9]+/.exec(e),Ir=()=>_r(1.1.toLocaleString())[0],ki=()=>{const e=Ir(),t=1e3.toLocaleString();return t!=="1000"?_r(t)[0]:e==="."?",":"."},O={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},cn=[],we=(e,t,n)=>new Promise((r,i)=>{const a=cn.filter(l=>l.key===e).map(l=>l.cb);if(a.length===0){r(t);return}const s=a.shift();a.reduce((l,o)=>l.then(u=>o(u,n)),s(t,n)).then(l=>r(l)).catch(l=>i(l))}),ke=(e,t,n)=>cn.filter(r=>r.key===e).map(r=>r.cb(t,n)),$i=(e,t)=>cn.push({key:e,cb:t}),Xi=e=>Object.assign(Ze,e),yt=()=>({...Ze}),ji=e=>{ce(e,(t,n)=>{Ze[t]&&(Ze[t][0]=Er(n,Ze[t][0],Ze[t][1]))})},Ze={id:[null,O.STRING],name:["filepond",O.STRING],disabled:[!1,O.BOOLEAN],className:[null,O.STRING],required:[!1,O.BOOLEAN],captureMethod:[null,O.STRING],allowSyncAcceptAttribute:[!0,O.BOOLEAN],allowDrop:[!0,O.BOOLEAN],allowBrowse:[!0,O.BOOLEAN],allowPaste:[!0,O.BOOLEAN],allowMultiple:[!1,O.BOOLEAN],allowReplace:[!0,O.BOOLEAN],allowRevert:[!0,O.BOOLEAN],allowRemove:[!0,O.BOOLEAN],allowProcess:[!0,O.BOOLEAN],allowReorder:[!1,O.BOOLEAN],allowDirectoriesOnly:[!1,O.BOOLEAN],storeAsFile:[!1,O.BOOLEAN],forceRevert:[!1,O.BOOLEAN],maxFiles:[null,O.INT],checkValidity:[!1,O.BOOLEAN],itemInsertLocationFreedom:[!0,O.BOOLEAN],itemInsertLocation:["before",O.STRING],itemInsertInterval:[75,O.INT],dropOnPage:[!1,O.BOOLEAN],dropOnElement:[!0,O.BOOLEAN],dropValidation:[!1,O.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],O.ARRAY],instantUpload:[!0,O.BOOLEAN],maxParallelUploads:[2,O.INT],allowMinimumUploadDuration:[!0,O.BOOLEAN],chunkUploads:[!1,O.BOOLEAN],chunkForce:[!1,O.BOOLEAN],chunkSize:[5e6,O.INT],chunkRetryDelays:[[500,1e3,3e3],O.ARRAY],server:[null,O.SERVER_API],fileSizeBase:[1e3,O.INT],labelFileSizeBytes:["bytes",O.STRING],labelFileSizeKilobytes:["KB",O.STRING],labelFileSizeMegabytes:["MB",O.STRING],labelFileSizeGigabytes:["GB",O.STRING],labelDecimalSeparator:[Ir(),O.STRING],labelThousandsSeparator:[ki(),O.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',O.STRING],labelInvalidField:["Field contains invalid files",O.STRING],labelFileWaitingForSize:["Waiting for size",O.STRING],labelFileSizeNotAvailable:["Size not available",O.STRING],labelFileCountSingular:["file in list",O.STRING],labelFileCountPlural:["files in list",O.STRING],labelFileLoading:["Loading",O.STRING],labelFileAdded:["Added",O.STRING],labelFileLoadError:["Error during load",O.STRING],labelFileRemoved:["Removed",O.STRING],labelFileRemoveError:["Error during remove",O.STRING],labelFileProcessing:["Uploading",O.STRING],labelFileProcessingComplete:["Upload complete",O.STRING],labelFileProcessingAborted:["Upload cancelled",O.STRING],labelFileProcessingError:["Error during upload",O.STRING],labelFileProcessingRevertError:["Error during revert",O.STRING],labelTapToCancel:["tap to cancel",O.STRING],labelTapToRetry:["tap to retry",O.STRING],labelTapToUndo:["tap to undo",O.STRING],labelButtonRemoveItem:["Remove",O.STRING],labelButtonAbortItemLoad:["Abort",O.STRING],labelButtonRetryItemLoad:["Retry",O.STRING],labelButtonAbortItemProcessing:["Cancel",O.STRING],labelButtonUndoItemProcessing:["Undo",O.STRING],labelButtonRetryItemProcessing:["Retry",O.STRING],labelButtonProcessItem:["Upload",O.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',O.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',O.STRING],oninit:[null,O.FUNCTION],onwarning:[null,O.FUNCTION],onerror:[null,O.FUNCTION],onactivatefile:[null,O.FUNCTION],oninitfile:[null,O.FUNCTION],onaddfilestart:[null,O.FUNCTION],onaddfileprogress:[null,O.FUNCTION],onaddfile:[null,O.FUNCTION],onprocessfilestart:[null,O.FUNCTION],onprocessfileprogress:[null,O.FUNCTION],onprocessfileabort:[null,O.FUNCTION],onprocessfilerevert:[null,O.FUNCTION],onprocessfile:[null,O.FUNCTION],onprocessfiles:[null,O.FUNCTION],onremovefile:[null,O.FUNCTION],onpreparefile:[null,O.FUNCTION],onupdatefiles:[null,O.FUNCTION],onreorderfiles:[null,O.FUNCTION],beforeDropFile:[null,O.FUNCTION],beforeAddFile:[null,O.FUNCTION],beforeRemoveFile:[null,O.FUNCTION],beforePrepareFile:[null,O.FUNCTION],stylePanelLayout:[null,O.STRING],stylePanelAspectRatio:[null,O.STRING],styleItemPanelAspectRatio:[null,O.STRING],styleButtonRemoveItemPosition:["left",O.STRING],styleButtonProcessItemPosition:["right",O.STRING],styleLoadIndicatorPosition:["right",O.STRING],styleProgressIndicatorPosition:["right",O.STRING],styleButtonRemoveItemAlign:[!1,O.BOOLEAN],files:[[],O.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],O.ARRAY]},qe=(e,t)=>Ge(t)?e[0]||null:nt(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),gr=e=>{if(Ge(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Ce=e=>e.filter(t=>!t.archived),mr={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Et=null;const Qi=()=>{if(Et===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,Et=t.files.length===1}catch{Et=!1}return Et},Zi=[Q.LOAD_ERROR,Q.PROCESSING_ERROR,Q.PROCESSING_REVERT_ERROR],Ki=[Q.LOADING,Q.PROCESSING,Q.PROCESSING_QUEUED,Q.INIT],Ji=[Q.PROCESSING_COMPLETE],es=e=>Zi.includes(e.status),ts=e=>Ki.includes(e.status),ns=e=>Ji.includes(e.status),vn=e=>he(e.options.server)&&(he(e.options.server.process)||Ve(e.options.server.process)),rs=e=>({GET_STATUS:()=>{const t=Ce(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:a,READY:s}=mr;return t.length===0?n:t.some(es)?r:t.some(ts)?i:t.some(ns)?s:a},GET_ITEM:t=>qe(e.items,t),GET_ACTIVE_ITEM:t=>qe(Ce(e.items),t),GET_ACTIVE_ITEMS:()=>Ce(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=qe(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=qe(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:gr(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>Ce(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>Ce(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&Qi()&&!vn(e),IS_ASYNC:()=>vn(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),is=e=>{const t=Ce(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},Tr=(e,t,n)=>Math.max(Math.min(n,e),t),ss=(e,t,n)=>e.splice(t,0,n),as=(e,t,n)=>Ge(t)?null:typeof n>"u"?(e.push(t),t):(n=Tr(n,0,e.length),ss(e,n,t),t),kt=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),lt=e=>`${e}`.split("/").pop().split("?").shift(),Gt=e=>e.split(".").pop(),os=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},it=(e,t="")=>(t+e).slice(-t.length),hr=(e=new Date)=>`${e.getFullYear()}-${it(e.getMonth()+1,"00")}-${it(e.getDate(),"00")}_${it(e.getHours(),"00")}-${it(e.getMinutes(),"00")}-${it(e.getSeconds(),"00")}`,tt=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),De(t)||(t=hr()),t&&r===null&&Gt(t)?i.name=t:(r=r||os(i.type),i.name=t+(r?"."+r:"")),i},ls=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Rr=(e,t)=>{const n=ls();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},cs=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Rr(n,t)},Or=e=>(/^data:(.+);/.exec(e)||[])[1]||null,us=e=>e.split(",")[1].replace(/\s/g,""),ds=e=>atob(us(e)),fs=e=>{const t=Or(e),n=ds(e);return cs(n,t)},Es=(e,t,n)=>tt(fs(e),t,null,n),ps=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},_s=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Is=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,un=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=ps(r);if(i){t.name=i;continue}const a=_s(r);if(a){t.size=a;continue}const s=Is(r);if(s){t.source=s;continue}}return t},gs=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const l=t.source;s.fire("init",l),l instanceof File?s.fire("load",l):l instanceof Blob?s.fire("load",tt(l,l.name)):kt(l)?s.fire("load",Es(l)):a(l)},a=l=>{if(!e){s.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,o=>{t.duration=Date.now()-t.timestamp,t.complete=!0,o instanceof Blob&&(o=tt(o,o.name||lt(l))),s.fire("load",o instanceof Blob?o:o?o.body:null)},o=>{s.fire("error",typeof o=="string"?{type:"error",code:0,body:o}:o)},(o,u,c)=>{if(c&&(t.size=c),t.duration=Date.now()-t.timestamp,!o){t.progress=null;return}t.progress=u/c,s.fire("progress",t.progress)},()=>{s.fire("abort")},o=>{const u=un(typeof o=="string"?o:o.headers);s.fire("meta",{size:t.size||u.size,filename:u.name,source:u.source})})},s={...Nt(),setSource:l=>t.source=l,getProgress:n,abort:r,load:i};return s},Mn=e=>/GET|HEAD/.test(e),He=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,s.abort()}};let i=!1,a=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),Mn(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const s=new XMLHttpRequest,l=Mn(n.method)?s:s.upload;return l.onprogress=o=>{i||r.onprogress(o.lengthComputable,o.loaded,o.total)},s.onreadystatechange=()=>{s.readyState<2||s.readyState===4&&s.status===0||a||(a=!0,r.onheaders(s))},s.onload=()=>{s.status>=200&&s.status<300?r.onload(s):r.onerror(s)},s.onerror=()=>r.onerror(s),s.onabort=()=>{i=!0,r.onabort()},s.ontimeout=()=>r.ontimeout(s),s.open(n.method,t,!0),nt(n.timeout)&&(s.timeout=n.timeout),Object.keys(n.headers).forEach(o=>{const u=unescape(encodeURIComponent(n.headers[o]));s.setRequestHeader(o,u)}),n.responseType&&(s.responseType=n.responseType),n.withCredentials&&(s.withCredentials=!0),s.send(e),r},de=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),Ye=e=>t=>{e(de("error",0,"Timeout",t.getAllResponseHeaders()))},wn=e=>/\?/.test(e),ot=(...e)=>{let t="";return e.forEach(n=>{t+=wn(t)&&wn(n)?n.replace(/\?/,"&"):n}),t},xt=(e="",t)=>{if(typeof t=="function")return t;if(!t||!De(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,a,s,l,o,u)=>{const c=He(i,ot(e,t.url),{...t,responseType:"blob"});return c.onload=f=>{const I=f.getAllResponseHeaders(),m=un(I).name||lt(i);a(de("load",f.status,t.method==="HEAD"?null:tt(n(f.response),m),I))},c.onerror=f=>{s(de("error",f.status,r(f.response)||f.statusText,f.getAllResponseHeaders()))},c.onheaders=f=>{u(de("headers",f.status,null,f.getAllResponseHeaders()))},c.ontimeout=Ye(s),c.onprogress=l,c.onabort=o,c}},Le={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},ms=(e,t,n,r,i,a,s,l,o,u,c)=>{const f=[],{chunkTransferId:I,chunkServer:m,chunkSize:E,chunkRetryDelays:T}=c,v={serverId:I,aborted:!1},D=t.ondata||(A=>A),b=t.onload||((A,J)=>J==="HEAD"?A.getResponseHeader("Upload-Offset"):A.response),B=t.onerror||(A=>null),x=A=>{const J=new FormData;he(i)&&J.append(n,JSON.stringify(i));const h=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},L={...t,headers:h},q=He(D(J),ot(e,t.url),L);q.onload=k=>A(b(k,L.method)),q.onerror=k=>s(de("error",k.status,B(k.response)||k.statusText,k.getAllResponseHeaders())),q.ontimeout=Ye(s)},V=A=>{const J=ot(e,m.url,v.serverId),L={headers:typeof t.headers=="function"?t.headers(v.serverId):{...t.headers},method:"HEAD"},q=He(null,J,L);q.onload=k=>A(b(k,L.method)),q.onerror=k=>s(de("error",k.status,B(k.response)||k.statusText,k.getAllResponseHeaders())),q.ontimeout=Ye(s)},X=Math.floor(r.size/E);for(let A=0;A<=X;A++){const J=A*E,h=r.slice(J,J+E,"application/offset+octet-stream");f[A]={index:A,size:h.size,offset:J,data:h,file:r,progress:0,retries:[...T],status:Le.QUEUED,error:null,request:null,timeout:null}}const te=()=>a(v.serverId),N=A=>A.status===Le.QUEUED||A.status===Le.ERROR,Y=A=>{if(v.aborted)return;if(A=A||f.find(N),!A){f.every(Z=>Z.status===Le.COMPLETE)&&te();return}A.status=Le.PROCESSING,A.progress=null;const J=m.ondata||(Z=>Z),h=m.onerror||(Z=>null),L=m.onload||(()=>{}),q=ot(e,m.url,v.serverId),k=typeof m.headers=="function"?m.headers(A):{...m.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":A.offset,"Upload-Length":r.size,"Upload-Name":r.name},ae=A.request=He(J(A.data),q,{...m,headers:k});ae.onload=Z=>{L(Z,A.index,f.length),A.status=Le.COMPLETE,A.request=null,j()},ae.onprogress=(Z,Xe,je)=>{A.progress=Z?Xe:null,z()},ae.onerror=Z=>{A.status=Le.ERROR,A.request=null,A.error=h(Z.response)||Z.statusText,K(A)||s(de("error",Z.status,h(Z.response)||Z.statusText,Z.getAllResponseHeaders()))},ae.ontimeout=Z=>{A.status=Le.ERROR,A.request=null,K(A)||Ye(s)(Z)},ae.onabort=()=>{A.status=Le.QUEUED,A.request=null,o()}},K=A=>A.retries.length===0?!1:(A.status=Le.WAITING,clearTimeout(A.timeout),A.timeout=setTimeout(()=>{Y(A)},A.retries.shift()),!0),z=()=>{const A=f.reduce((h,L)=>h===null||L.progress===null?null:h+L.progress,0);if(A===null)return l(!1,0,0);const J=f.reduce((h,L)=>h+L.size,0);l(!0,A,J)},j=()=>{f.filter(J=>J.status===Le.PROCESSING).length>=1||Y()},ue=()=>{f.forEach(A=>{clearTimeout(A.timeout),A.request&&A.request.abort()})};return v.serverId?V(A=>{v.aborted||(f.filter(J=>J.offset<A).forEach(J=>{J.status=Le.COMPLETE,J.progress=J.size}),j())}):x(A=>{v.aborted||(u(A),v.serverId=A,j())}),{abort:()=>{v.aborted=!0,ue()}}},Ts=(e,t,n,r)=>(i,a,s,l,o,u,c)=>{if(!i)return;const f=r.chunkUploads,I=f&&i.size>r.chunkSize,m=f&&(I||r.chunkForce);if(i instanceof Blob&&m)return ms(e,t,n,i,a,s,l,o,u,c,r);const E=t.ondata||(V=>V),T=t.onload||(V=>V),v=t.onerror||(V=>null),D=typeof t.headers=="function"?t.headers(i,a)||{}:{...t.headers},b={...t,headers:D};var B=new FormData;he(a)&&B.append(n,JSON.stringify(a)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(V=>{B.append(n,V.file,V.name===null?V.file.name:`${V.name}${V.file.name}`)});const x=He(E(B),ot(e,t.url),b);return x.onload=V=>{s(de("load",V.status,T(V.response),V.getAllResponseHeaders()))},x.onerror=V=>{l(de("error",V.status,v(V.response)||V.statusText,V.getAllResponseHeaders()))},x.ontimeout=Ye(l),x.onprogress=o,x.onabort=u,x},hs=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!De(t.url)?null:Ts(e,t,n,r),st=(e="",t)=>{if(typeof t=="function")return t;if(!t||!De(t.url))return(i,a)=>a();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,a,s)=>{const l=He(i,e+t.url,t);return l.onload=o=>{a(de("load",o.status,n(o.response),o.getAllResponseHeaders()))},l.onerror=o=>{s(de("error",o.status,r(o.response)||o.statusText,o.getAllResponseHeaders()))},l.ontimeout=Ye(s),l}},Ar=(e=0,t=1)=>e+Math.random()*(t-e),Rs=(e,t=1e3,n=0,r=25,i=250)=>{let a=null;const s=Date.now(),l=()=>{let o=Date.now()-s,u=Ar(r,i);o+u>t&&(u=o+u-t);let c=o/t;if(c>=1||document.hidden){e(1);return}e(c),a=setTimeout(l,u)};return t>0&&l(),{clear:()=>{clearTimeout(a)}}},Os=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(c,f)=>{const I=()=>{n.duration===0||n.progress===null||u.fire("progress",u.getProgress())},m=()=>{n.complete=!0,u.fire("load-perceived",n.response.body)};u.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=Rs(E=>{n.perceivedProgress=E,n.perceivedDuration=Date.now()-n.timestamp,I(),n.response&&n.perceivedProgress===1&&!n.complete&&m()},r?Ar(750,1500):0),n.request=e(c,f,E=>{n.response=he(E)?E:{type:"load",code:200,body:`${E}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,u.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&m()},E=>{n.perceivedPerformanceUpdater.clear(),u.fire("error",he(E)?E:{type:"error",code:0,body:`${E}`})},(E,T,v)=>{n.duration=Date.now()-n.timestamp,n.progress=E?T/v:null,I()},()=>{n.perceivedPerformanceUpdater.clear(),u.fire("abort",n.response?n.response.body:null)},E=>{u.fire("transfer",E)})},a=()=>{n.request&&(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},s=()=>{a(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,o=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,u={...Nt(),process:i,abort:a,getProgress:l,getDuration:o,reset:s};return u},Dr=e=>e.substring(0,e.lastIndexOf("."))||e,As=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||kt(e)?t[0]=e.name||hr():kt(e)?(t[1]=e.length,t[2]=Or(e)):De(e)&&(t[0]=lt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},ze=e=>!!(e instanceof File||e instanceof Blob&&e.name),Sr=e=>{if(!he(e))return e;const t=wt(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&he(r)?Sr(r):r}return t},Ds=(e=null,t=null,n=null)=>{const r=on(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?Q.PROCESSING_COMPLETE:Q.INIT,activeLoader:null,activeProcessor:null};let a=null;const s={},l=N=>i.status=N,o=(N,...Y)=>{i.released||i.frozen||X.fire(N,...Y)},u=()=>Gt(i.file.name),c=()=>i.file.type,f=()=>i.file.size,I=()=>i.file,m=(N,Y,K)=>{if(i.source=N,X.fireSync("init"),i.file){X.fireSync("load-skip");return}i.file=As(N),Y.on("init",()=>{o("load-init")}),Y.on("meta",z=>{i.file.size=z.size,i.file.filename=z.filename,z.source&&(e=Ie.LIMBO,i.serverFileReference=z.source,i.status=Q.PROCESSING_COMPLETE),o("load-meta")}),Y.on("progress",z=>{l(Q.LOADING),o("load-progress",z)}),Y.on("error",z=>{l(Q.LOAD_ERROR),o("load-request-error",z)}),Y.on("abort",()=>{l(Q.INIT),o("load-abort")}),Y.on("load",z=>{i.activeLoader=null;const j=A=>{i.file=ze(A)?A:i.file,e===Ie.LIMBO&&i.serverFileReference?l(Q.PROCESSING_COMPLETE):l(Q.IDLE),o("load")},ue=A=>{i.file=z,o("load-meta"),l(Q.LOAD_ERROR),o("load-file-error",A)};if(i.serverFileReference){j(z);return}K(z,j,ue)}),Y.setSource(N),i.activeLoader=Y,Y.load()},E=()=>{i.activeLoader&&i.activeLoader.load()},T=()=>{if(i.activeLoader){i.activeLoader.abort();return}l(Q.INIT),o("load-abort")},v=(N,Y)=>{if(i.processingAborted){i.processingAborted=!1;return}if(l(Q.PROCESSING),a=null,!(i.file instanceof Blob)){X.on("load",()=>{v(N,Y)});return}N.on("load",j=>{i.transferId=null,i.serverFileReference=j}),N.on("transfer",j=>{i.transferId=j}),N.on("load-perceived",j=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=j,l(Q.PROCESSING_COMPLETE),o("process-complete",j)}),N.on("start",()=>{o("process-start")}),N.on("error",j=>{i.activeProcessor=null,l(Q.PROCESSING_ERROR),o("process-error",j)}),N.on("abort",j=>{i.activeProcessor=null,i.serverFileReference=j,l(Q.IDLE),o("process-abort"),a&&a()}),N.on("progress",j=>{o("process-progress",j)});const K=j=>{i.archived||N.process(j,{...s})},z=console.error;Y(i.file,K,z),i.activeProcessor=N},D=()=>{i.processingAborted=!1,l(Q.PROCESSING_QUEUED)},b=()=>new Promise(N=>{if(!i.activeProcessor){i.processingAborted=!0,l(Q.IDLE),o("process-abort"),N();return}a=()=>{N()},i.activeProcessor.abort()}),B=(N,Y)=>new Promise((K,z)=>{const j=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(j===null){K();return}N(j,()=>{i.serverFileReference=null,i.transferId=null,K()},ue=>{if(!Y){K();return}l(Q.PROCESSING_REVERT_ERROR),o("process-revert-error"),z(ue)}),l(Q.IDLE),o("process-revert")}),x=(N,Y,K)=>{const z=N.split("."),j=z[0],ue=z.pop();let A=s;z.forEach(J=>A=A[J]),JSON.stringify(A[ue])!==JSON.stringify(Y)&&(A[ue]=Y,o("metadata-update",{key:j,value:s[j],silent:K}))},X={id:{get:()=>r},origin:{get:()=>e,set:N=>e=N},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Dr(i.file.name)},fileExtension:{get:u},fileType:{get:c},fileSize:{get:f},file:{get:I},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:N=>Sr(N?s[N]:s),setMetadata:(N,Y,K)=>{if(he(N)){const z=N;return Object.keys(z).forEach(j=>{x(j,z[j],Y)}),N}return x(N,Y,K),Y},extend:(N,Y)=>te[N]=Y,abortLoad:T,retryLoad:E,requestProcessing:D,abortProcessing:b,load:m,process:v,revert:B,...Nt(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived},setFile:N=>i.file=N},te=Be(X);return te},Ss=(e,t)=>Ge(t)?0:De(t)?e.findIndex(n=>n.id===t):-1,Cn=(e,t)=>{const n=Ss(e,t);if(!(n<0))return e[n]||null},bn=(e,t,n,r,i,a)=>{const s=He(null,e,{method:"GET",responseType:"blob"});return s.onload=l=>{const o=l.getAllResponseHeaders(),u=un(o).name||lt(e);t(de("load",l.status,tt(l.response,u),o))},s.onerror=l=>{n(de("error",l.status,l.statusText,l.getAllResponseHeaders()))},s.onheaders=l=>{a(de("headers",l.status,null,l.getAllResponseHeaders()))},s.ontimeout=Ye(n),s.onprogress=r,s.onabort=i,s},Nn=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),ys=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Nn(location.href)!==Nn(e),pt=e=>(...t)=>Ve(e)?e(...t):e,Ps=e=>!ze(e.file),Vt=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:Ce(t.items)})},0)},Gn=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),qt=(e,t)=>{e.items.sort((n,r)=>t(ye(n),ye(r)))},ve=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...a}={})=>{const s=qe(e.items,n);if(!s){i({error:de("error",0,"Item not found"),file:null});return}t(s,r,i,a||{})},Ls=(e,t,n)=>({ABORT_ALL:()=>{Ce(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(s=>({source:s.source?s.source:s,options:s.options}));let a=Ce(n.items);a.forEach(s=>{i.find(l=>l.source===s.source||l.source===s.file)||e("REMOVE_ITEM",{query:s,remove:!1})}),a=Ce(n.items),i.forEach((s,l)=>{a.find(o=>o.source===s.source||o.file===s.source)||e("ADD_ITEM",{...s,interactionMethod:Me.NONE,index:l})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:a})=>{a.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const s=Cn(n.items,r);if(!t("IS_ASYNC")){we("SHOULD_PREPARE_OUTPUT",!1,{item:s,query:t,action:i,change:a}).then(c=>{const f=t("GET_BEFORE_PREPARE_FILE");f&&(c=f(s,c)),c&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:s,success:I=>{e("DID_PREPARE_OUTPUT",{id:r,file:I})}},!0)});return}s.origin===Ie.LOCAL&&e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},o=c=>{s.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c?l:()=>{}).catch(()=>{})},u=c=>{s.abortProcessing().then(c?l:()=>{})};if(s.status===Q.PROCESSING_COMPLETE)return o(n.options.instantUpload);if(s.status===Q.PROCESSING)return u(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:r,index:i})=>{const a=qe(n.items,r);if(!a)return;const s=n.items.indexOf(a);i=Tr(i,0,n.items.length-1),s!==i&&n.items.splice(i,0,n.items.splice(s,1)[0])},SORT:({compare:r})=>{qt(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:a,success:s=()=>{},failure:l=()=>{}})=>{let o=i;if(i===-1||typeof i>"u"){const m=t("GET_ITEM_INSERT_LOCATION"),E=t("GET_TOTAL_ITEMS");o=m==="before"?0:E}const u=t("GET_IGNORED_FILES"),c=m=>ze(m)?!u.includes(m.name.toLowerCase()):!Ge(m),I=r.filter(c).map(m=>new Promise((E,T)=>{e("ADD_ITEM",{interactionMethod:a,source:m.source||m,success:E,failure:T,index:o++,options:m.options||{}})}));Promise.all(I).then(s).catch(l)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:a,success:s=()=>{},failure:l=()=>{},options:o={}})=>{if(Ge(r)){l({error:de("error",0,"No source"),file:null});return}if(ze(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!is(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const b=de("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:b}),l({error:b,file:null});return}const D=Ce(n.items)[0];if(D.status===Q.PROCESSING_COMPLETE||D.status===Q.PROCESSING_REVERT_ERROR){const b=t("GET_FORCE_REVERT");if(D.revert(st(n.options.server.url,n.options.server.revert),b).then(()=>{b&&e("ADD_ITEM",{source:r,index:i,interactionMethod:a,success:s,failure:l,options:o})}).catch(()=>{}),b)return}e("REMOVE_ITEM",{query:D.id})}const u=o.type==="local"?Ie.LOCAL:o.type==="limbo"?Ie.LIMBO:Ie.INPUT,c=Ds(u,u===Ie.INPUT?null:r,o.file);Object.keys(o.metadata||{}).forEach(D=>{c.setMetadata(D,o.metadata[D])}),ke("DID_CREATE_ITEM",c,{query:t,dispatch:e});const f=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=f==="before"?-1:n.items.length),as(n.items,c,i),Ve(f)&&r&&qt(n,f);const I=c.id;c.on("init",()=>{e("DID_INIT_ITEM",{id:I})}),c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:I})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:I})}),c.on("load-progress",D=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:I,progress:D})}),c.on("load-request-error",D=>{const b=pt(n.options.labelFileLoadError)(D);if(D.code>=400&&D.code<500){e("DID_THROW_ITEM_INVALID",{id:I,error:D,status:{main:b,sub:`${D.code} (${D.body})`}}),l({error:D,file:ye(c)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:I,error:D,status:{main:b,sub:n.options.labelTapToRetry}})}),c.on("load-file-error",D=>{e("DID_THROW_ITEM_INVALID",{id:I,error:D.status,status:D.status}),l({error:D.status,file:ye(c)})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:I})}),c.on("load-skip",()=>{c.on("metadata-update",D=>{ze(c.file)&&e("DID_UPDATE_ITEM_METADATA",{id:I,change:D})}),e("COMPLETE_LOAD_ITEM",{query:I,item:c,data:{source:r,success:s}})}),c.on("load",()=>{const D=b=>{if(!b){e("REMOVE_ITEM",{query:I});return}c.on("metadata-update",B=>{e("DID_UPDATE_ITEM_METADATA",{id:I,change:B})}),we("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t}).then(B=>{const x=t("GET_BEFORE_PREPARE_FILE");x&&(B=x(c,B));const V=()=>{e("COMPLETE_LOAD_ITEM",{query:I,item:c,data:{source:r,success:s}}),Vt(e,n)};if(B){e("REQUEST_PREPARE_OUTPUT",{query:I,item:c,success:X=>{e("DID_PREPARE_OUTPUT",{id:I,file:X}),V()}},!0);return}V()})};we("DID_LOAD_ITEM",c,{query:t,dispatch:e}).then(()=>{Gn(t("GET_BEFORE_ADD_FILE"),ye(c)).then(D)}).catch(b=>{if(!b||!b.error||!b.status)return D(!1);e("DID_THROW_ITEM_INVALID",{id:I,error:b.error,status:b.status})})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:I})}),c.on("process-progress",D=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:I,progress:D})}),c.on("process-error",D=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:I,error:D,status:{main:pt(n.options.labelFileProcessingError)(D),sub:n.options.labelTapToRetry}})}),c.on("process-revert-error",D=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:I,error:D,status:{main:pt(n.options.labelFileProcessingRevertError)(D),sub:n.options.labelTapToRetry}})}),c.on("process-complete",D=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:I,error:null,serverFileReference:D}),e("DID_DEFINE_VALUE",{id:I,value:D})}),c.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:I})}),c.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:I}),e("DID_DEFINE_VALUE",{id:I,value:null})}),e("DID_ADD_ITEM",{id:I,index:i,interactionMethod:a}),Vt(e,n);const{url:m,load:E,restore:T,fetch:v}=n.options.server||{};c.load(r,gs(u===Ie.INPUT?De(r)&&ys(r)&&v?xt(m,v):bn:u===Ie.LIMBO?xt(m,T):xt(m,E)),(D,b,B)=>{we("LOAD_FILE",D,{query:t}).then(b).catch(B)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:a=()=>{}})=>{const s={error:de("error",0,"Item not found"),file:null};if(r.archived)return a(s);we("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(l=>{we("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:r}).then(o=>{if(r.archived)return a(s);i(o)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:a,source:s}=i,l=t("GET_ITEM_INSERT_LOCATION");if(Ve(l)&&s&&qt(n,l),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Ie.INPUT?null:s}),a(ye(r)),r.origin===Ie.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Ie.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:s}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||s});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:ve(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:ve(n,(r,i,a)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:s=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:s}),i({file:r,output:s})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:ve(n,(r,i,a)=>{if(!(r.status===Q.IDLE||r.status===Q.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:a}),o=()=>document.hidden?l():setTimeout(l,32);r.status===Q.PROCESSING_COMPLETE||r.status===Q.PROCESSING_REVERT_ERROR?r.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(o).catch(()=>{}):r.status===Q.PROCESSING&&r.abortProcessing().then(o);return}r.status!==Q.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:a},!0))}),PROCESS_ITEM:ve(n,(r,i,a)=>{const s=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",Q.PROCESSING).length===s){n.processingQueue.push({id:r.id,success:i,failure:a});return}if(r.status===Q.PROCESSING)return;const o=()=>{const c=n.processingQueue.shift();if(!c)return;const{id:f,success:I,failure:m}=c,E=qe(n.items,f);if(!E||E.archived){o();return}e("PROCESS_ITEM",{query:f,success:I,failure:m},!0)};r.onOnce("process-complete",()=>{i(ye(r)),o();const c=n.options.server;if(n.options.instantUpload&&r.origin===Ie.LOCAL&&Ve(c.remove)){const m=()=>{};r.origin=Ie.LIMBO,n.options.server.remove(r.source,m,m)}t("GET_ITEMS_BY_STATUS",Q.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",c=>{a({error:c,file:ye(r)}),o()});const u=n.options;r.process(Os(hs(u.server.url,u.server.process,u.name,{chunkTransferId:r.transferId,chunkServer:u.server.patch,chunkUploads:u.chunkUploads,chunkForce:u.chunkForce,chunkSize:u.chunkSize,chunkRetryDelays:u.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,f,I)=>{we("PREPARE_OUTPUT",c,{query:t,item:r}).then(m=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:m}),f(m)}).catch(I)})}),RETRY_ITEM_PROCESSING:ve(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:ve(n,r=>{Gn(t("GET_BEFORE_REMOVE_FILE"),ye(r)).then(i=>{i&&e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:ve(n,r=>{r.release()}),REMOVE_ITEM:ve(n,(r,i,a,s)=>{const l=()=>{const u=r.id;Cn(n.items,u).archive(),e("DID_REMOVE_ITEM",{error:null,id:u,item:r}),Vt(e,n),i(ye(r))},o=n.options.server;r.origin===Ie.LOCAL&&o&&Ve(o.remove)&&s.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),o.remove(r.source,()=>l(),u=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:de("error",0,u,null),status:{main:pt(n.options.labelFileRemoveError)(u),sub:n.options.labelTapToRetry}})})):((s.revert&&r.origin!==Ie.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:ve(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:ve(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ve(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=l=>{l&&e("REVERT_ITEM_PROCESSING",{query:r})},a=t("GET_BEFORE_REMOVE_FILE");if(!a)return i(!0);const s=a(ye(r));if(s==null)return i(!0);if(typeof s=="boolean")return i(s);typeof s.then=="function"&&s.then(i)}),REVERT_ITEM_PROCESSING:ve(n,r=>{r.revert(st(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||Ps(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),a=vs.filter(l=>i.includes(l));[...a,...Object.keys(r).filter(l=>!a.includes(l))].forEach(l=>{e(`SET_${bt(l,"_").toUpperCase()}`,{value:r[l]})})}}),vs=["server"],dn=e=>e,Fe=e=>document.createElement(e),fe=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Fn=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},Ms=(e,t,n,r,i,a)=>{const s=Fn(e,t,n,i),l=Fn(e,t,n,r);return["M",s.x,s.y,"A",n,n,0,a,0,l.x,l.y].join(" ")},ws=(e,t,n,r,i)=>{let a=1;return i>r&&i-r<=.5&&(a=0),r>i&&r-i>=.5&&(a=0),Ms(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,a)},Cs=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=St("svg");e.ref.path=St("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},bs=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(ge(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,a=0;t.spin?(i=0,a=.5):(i=0,a=t.progress);const s=ws(r,r,r-n,i,a);ge(e.ref.path,"d",s),ge(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},Un=Ee({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Cs,write:bs,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Ns=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},Gs=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,ge(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},yr=Ee({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Ns,write:Gs}),Pr=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:a="KB",labelMegabytes:s="MB",labelGigabytes:l="GB"}=r;e=Math.round(Math.abs(e));const o=n,u=n*n,c=n*n*n;return e<o?`${e} ${i}`:e<u?`${Math.floor(e/o)} ${a}`:e<c?`${Bn(e/u,1,t)} ${s}`:`${Bn(e/c,2,t)} ${l}`},Bn=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),Fs=({root:e,props:t})=>{const n=Fe("span");n.className="filepond--file-info-main",ge(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=Fe("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,fe(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),fe(n,dn(e.query("GET_ITEM_NAME",t.id)))},$t=({root:e,props:t})=>{fe(e.ref.fileSize,Pr(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),fe(e.ref.fileName,dn(e.query("GET_ITEM_NAME",t.id)))},xn=({root:e,props:t})=>{if(nt(e.query("GET_ITEM_SIZE",t.id))){$t({root:e,props:t});return}fe(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Us=Ee({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Se({DID_LOAD_ITEM:$t,DID_UPDATE_ITEM_META:$t,DID_THROW_ITEM_LOAD_ERROR:xn,DID_THROW_ITEM_INVALID:xn}),didCreateView:e=>{ke("CREATE_VIEW",{...e,view:e})},create:Fs,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Lr=e=>Math.round(e*100),Bs=({root:e})=>{const t=Fe("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=Fe("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,vr({root:e,action:{progress:null}})},vr=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Lr(t.progress)}%`;fe(e.ref.main,n),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},xs=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Lr(t.progress)}%`;fe(e.ref.main,n),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Vs=({root:e})=>{fe(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},qs=({root:e})=>{fe(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Hs=({root:e})=>{fe(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),fe(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Vn=({root:e})=>{fe(e.ref.main,""),fe(e.ref.sub,"")},at=({root:e,action:t})=>{fe(e.ref.main,t.status.main),fe(e.ref.sub,t.status.sub)},Ys=Ee({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Se({DID_LOAD_ITEM:Vn,DID_REVERT_ITEM_PROCESSING:Vn,DID_REQUEST_ITEM_PROCESSING:Vs,DID_ABORT_ITEM_PROCESSING:qs,DID_COMPLETE_ITEM_PROCESSING:Hs,DID_UPDATE_ITEM_PROCESS_PROGRESS:xs,DID_UPDATE_ITEM_LOAD_PROGRESS:vr,DID_THROW_ITEM_LOAD_ERROR:at,DID_THROW_ITEM_INVALID:at,DID_THROW_ITEM_PROCESSING_ERROR:at,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:at,DID_THROW_ITEM_REMOVE_ERROR:at}),didCreateView:e=>{ke("CREATE_VIEW",{...e,view:e})},create:Bs,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Xt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},jt=[];ce(Xt,e=>{jt.push(e)});const Pe=e=>{if(Qt(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},zs=e=>e.ref.buttonAbortItemLoad.rect.element.width,_t=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Ws=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),ks=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),$s=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Qt=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Xs={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:ks},processProgressIndicator:{opacity:0,align:$s},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},qn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Pe},status:{translateX:Pe}},Ht={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ke={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Pe},status:{translateX:Pe,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Pe},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Qt},info:{translateX:Pe},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Qt},buttonRemoveItem:{opacity:1},info:{translateX:Pe},status:{opacity:1,translateX:Pe}},DID_LOAD_ITEM:qn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Pe},status:{translateX:Pe}},DID_START_ITEM_PROCESSING:Ht,DID_REQUEST_ITEM_PROCESSING:Ht,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ht,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Pe}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Pe},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:qn},js=Ee({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Qs=({root:e,props:t})=>{const n=Object.keys(Xt).reduce((E,T)=>(E[T]={...Xt[T]},E),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),a=e.query("GET_ALLOW_REMOVE"),s=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),o=e.query("IS_ASYNC"),u=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;o?s&&!i?c=E=>!/RevertItemProcessing/.test(E):!s&&i?c=E=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(E):!s&&!i&&(c=E=>!/Process/.test(E)):c=E=>!/Process/.test(E);const f=c?jt.filter(c):jt.concat();if(l&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),o&&!i){const E=Ke.DID_COMPLETE_ITEM_PROCESSING;E.info.translateX=Ws,E.info.translateY=_t,E.status.translateY=_t,E.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(o&&!s&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(E=>{Ke[E].status.translateY=_t}),Ke.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=zs),u&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const E=Ke.DID_COMPLETE_ITEM_PROCESSING;E.info.translateX=Pe,E.status.translateY=_t,E.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(n.RemoveItem.disabled=!0),ce(n,(E,T)=>{const v=e.createChildView(yr,{label:e.query(T.label),icon:e.query(T.icon),opacity:0});f.includes(E)&&e.appendChildView(v),T.disabled&&(v.element.setAttribute("disabled","disabled"),v.element.setAttribute("hidden","hidden")),v.element.dataset.align=e.query(`GET_STYLE_${T.align}`),v.element.classList.add(T.className),v.on("click",D=>{D.stopPropagation(),!T.disabled&&e.dispatch(T.action,{query:r})}),e.ref[`button${E}`]=v}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(js)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(Us,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Ys,{id:r}));const I=e.appendChildView(e.createChildView(Un,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));I.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=I;const m=e.appendChildView(e.createChildView(Un,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));m.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=m,e.ref.activeStyles=[]},Zs=({root:e,actions:t,props:n})=>{Ks({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>Ke[i.type]);if(r){e.ref.activeStyles=[];const i=Ke[r.type];ce(Xs,(a,s)=>{const l=e.ref[a];ce(s,(o,u)=>{const c=i[a]&&typeof i[a][o]<"u"?i[a][o]:u;e.ref.activeStyles.push({control:l,key:o,value:c})})})}e.ref.activeStyles.forEach(({control:i,key:a,value:s})=>{i[a]=typeof s=="function"?s(e):s})},Ks=Se({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Js=Ee({create:Qs,write:Zs,didCreateView:e=>{ke("CREATE_VIEW",{...e,view:e})},name:"file"}),ea=({root:e,props:t})=>{e.ref.fileName=Fe("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Js,{id:t.id})),e.ref.data=!1},ta=({root:e,props:t})=>{fe(e.ref.fileName,dn(e.query("GET_ITEM_NAME",t.id)))},na=Ee({create:ea,ignoreRect:!0,write:Se({DID_LOAD_ITEM:ta}),didCreateView:e=>{ke("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Hn={type:"spring",damping:.6,mass:7},ra=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Hn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Hn},styles:["translateY"]}}].forEach(n=>{ia(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ia=(e,t,n)=>{const r=Ee({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},sa=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=ur(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},Mr=Ee({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:sa,create:ra,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),aa=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},Yn={type:"spring",stiffness:.75,damping:.45,mass:10},zn="spring",Wn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},oa=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(na,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Mr,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const a={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const s=aa(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:s});const l=f=>{if(!f.isPrimary)return;f.stopPropagation(),f.preventDefault(),t.dragOffset={x:f.pageX-a.x,y:f.pageY-a.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:s})},o=f=>{f.isPrimary&&(t.dragOffset={x:f.pageX-a.x,y:f.pageY-a.y},c())},u=()=>{c()},c=()=>{document.removeEventListener("pointercancel",u),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",o),e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:s}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0)};document.addEventListener("pointercancel",u),document.addEventListener("pointermove",l),document.addEventListener("pointerup",o)};e.element.addEventListener("pointerdown",n)},la=Se({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),ca=Se({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>Wn[s.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=Wn[n.currentState]||"");const a=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");a?r||(e.height=e.rect.element.width*a):(la({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),ua=Ee({create:oa,write:ca,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:zn,scaleY:zn,translateX:Yn,translateY:Yn,opacity:{type:"tween",duration:150}}}});var fn=(e,t)=>Math.max(1,Math.floor((e+1)/t));const En=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let a=null;if(i===0||n.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,o=l.marginLeft+l.marginRight,u=l.width+o,c=fn(r,u);if(c===1){for(let m=0;m<i;m++){const E=t[m],T=E.rect.outer.top+E.rect.element.height*.5;if(n.top<T)return m}return i}const f=l.marginTop+l.marginBottom,I=l.height+f;for(let m=0;m<i;m++){const E=m%c,T=Math.floor(m/c),v=E*u,D=T*I,b=D-l.marginTop,B=v+u,x=D+I+l.marginBottom;if(n.top<x&&n.top>b){if(n.left<B)return m;m!==i-1?a=m:a=null}}return a!==null?a:i},It={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)}},da=({root:e})=>{ge(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},fa=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const a=Date.now();let s=a,l=1;if(i!==Me.NONE){l=0;const o=e.query("GET_ITEM_INSERT_INTERVAL"),u=a-e.ref.lastItemSpanwDate;s=u<o?a+(o-u):a}e.ref.lastItemSpanwDate=s,e.appendChildView(e.createChildView(ua,{spawnDate:s,id:n,opacity:l,interactionMethod:i}),r)},kn=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Ea(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Ea=(e,t,n,r,i)=>{e.interactionMethod===Me.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Me.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Me.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Me.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},pa=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);r&&(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},Yt=e=>e.rect.element.height+e.rect.element.marginBottom+e.rect.element.marginTop,_a=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Ia=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),a=e.childViews.find(v=>v.id===n),s=e.childViews.length,l=r.getItemIndex(i);if(!a)return;const o={x:a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,y:a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y},u=Yt(a),c=_a(a);let f=Math.floor(e.rect.outer.width/c);f>s&&(f=s);const I=Math.floor(s/f+1);It.setHeight=u*I,It.setWidth=c*f;var m={y:Math.floor(o.y/u),x:Math.floor(o.x/c),getGridIndex:function(){return o.y>It.getHeight||o.y<0||o.x>It.getWidth||o.x<0?l:this.y*f+this.x},getColIndex:function(){const D=e.query("GET_ACTIVE_ITEMS"),b=e.childViews.filter(z=>z.rect.element.height),B=D.map(z=>b.find(j=>j.id===z.id)),x=B.findIndex(z=>z===a),V=Yt(a),X=B.length;let te=X,N=0,Y=0,K=0;for(let z=0;z<X;z++)if(N=Yt(B[z]),K=Y,Y=K+N,o.y<Y){if(x>z){if(o.y<K+V){te=z;break}continue}te=z;break}return te}};const E=f>1?m.getGridIndex():m.getColIndex();e.dispatch("MOVE_ITEM",{query:a,index:E});const T=r.getIndex();if(T===void 0||T!==E){if(r.setIndex(E),T===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:E})}},ga=Se({DID_ADD_ITEM:fa,DID_REMOVE_ITEM:pa,DID_DRAG_ITEM:Ia}),ma=({root:e,props:t,actions:n,shouldOptimize:r})=>{ga({root:e,props:t,actions:n});const{dragCoordinates:i}=t,a=e.rect.element.width,s=e.childViews.filter(B=>B.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(B=>s.find(x=>x.id===B.id)).filter(B=>B),o=i?En(e,l,i):null,u=e.ref.addIndex||null;e.ref.addIndex=null;let c=0,f=0,I=0;if(l.length===0)return;const m=l[0].rect.element,E=m.marginTop+m.marginBottom,T=m.marginLeft+m.marginRight,v=m.width+T,D=m.height+E,b=fn(a,v);if(b===1){let B=0,x=0;l.forEach((V,X)=>{if(o){let Y=X-o;Y===-2?x=-E*.25:Y===-1?x=-E*.75:Y===0?x=E*.75:Y===1?x=E*.25:x=0}r&&(V.translateX=null,V.translateY=null),V.markedForRemoval||kn(V,0,B+x);let N=(V.rect.element.height+E)*(V.markedForRemoval?V.opacity:1);B+=N})}else{let B=0,x=0;l.forEach((V,X)=>{X===o&&(c=1),X===u&&(I+=1),V.markedForRemoval&&V.opacity<.5&&(f-=1);const te=X+I+c+f,N=te%b,Y=Math.floor(te/b),K=N*v,z=Y*D,j=Math.sign(K-B),ue=Math.sign(z-x);B=K,x=z,!V.markedForRemoval&&(r&&(V.translateX=null,V.translateY=null),kn(V,K,z,j,ue))})}},Ta=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),ha=Ee({create:da,write:ma,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:Ta,mixins:{apis:["dragCoordinates"]}}),Ra=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(ha)),t.dragCoordinates=null,t.overflowing=!1},Oa=({root:e,props:t,action:n})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Aa=({props:e})=>{e.dragCoordinates=null},Da=Se({DID_DRAG:Oa,DID_END_DRAG:Aa}),Sa=({root:e,props:t,actions:n})=>{if(Da({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},ya=Ee({create:Ra,write:Sa,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),be=(e,t,n,r="")=>{n?ge(e,t,r):e.removeAttribute(t)},Pa=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Fe("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},La=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,ge(e.element,"name",e.query("GET_NAME")),ge(e.element,"aria-controls",`filepond--assistant-${t.id}`),ge(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),wr({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),Cr({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),br({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Zt({root:e}),Nr({root:e,action:{value:e.query("GET_REQUIRED")}}),Gr({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),Pa(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},wr=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&be(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},Cr=({root:e,action:t})=>{be(e.element,"multiple",t.value)},br=({root:e,action:t})=>{be(e.element,"webkitdirectory",t.value)},Zt=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;be(e.element,"disabled",r)},Nr=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&be(e.element,"required",!0):be(e.element,"required",!1)},Gr=({root:e,action:t})=>{be(e.element,"capture",!!t.value,t.value===!0?"":t.value)},$n=({root:e})=>{const{element:t}=e;if(e.query("GET_TOTAL_ITEMS")>0){be(t,"required",!1),be(t,"name",!1);const n=e.query("GET_ACTIVE_ITEMS");let r=!1;for(let i=0;i<n.length;i++)n[i].status===Q.LOAD_ERROR&&(r=!0);e.element.setCustomValidity(r?e.query("GET_LABEL_INVALID_FIELD"):"")}else be(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&be(t,"required",!0)},va=({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Ma=Ee({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:La,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Se({DID_LOAD_ITEM:$n,DID_REMOVE_ITEM:$n,DID_THROW_ITEM_INVALID:va,DID_SET_DISABLED:Zt,DID_SET_ALLOW_BROWSE:Zt,DID_SET_ALLOW_DIRECTORIES_ONLY:br,DID_SET_ALLOW_MULTIPLE:Cr,DID_SET_ACCEPTED_FILE_TYPES:wr,DID_SET_CAPTURE_METHOD:Gr,DID_SET_REQUIRED:Nr})}),Xn={ENTER:13,SPACE:32},wa=({root:e,props:t})=>{const n=Fe("label");ge(n,"for",`filepond--browser-${t.id}`),ge(n,"id",`filepond--drop-label-${t.id}`),e.ref.handleKeyDown=r=>{(r.keyCode===Xn.ENTER||r.keyCode===Xn.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Fr(n,t.caption),e.appendChild(n),e.ref.label=n},Fr=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&ge(n,"tabindex","0"),t},Ca=Ee({name:"drop-label",ignoreRect:!0,create:wa,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Se({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Fr(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),ba=Ee({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Na=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(ba,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},Ga=({root:e,action:t})=>{if(!e.ref.blob){Na({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},Fa=({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)},Ua=({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},Ba=({root:e,props:t,actions:n})=>{xa({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},xa=Se({DID_DRAG:Ga,DID_DROP:Ua,DID_END_DRAG:Fa}),Va=Ee({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:Ba}),Ur=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},qa=({root:e})=>{e.ref.fields={};const t=document.createElement("legend");t.textContent="Files",e.element.appendChild(t)},Ft=(e,t)=>e.ref.fields[t],pn=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])})},jn=({root:e})=>pn(e),Ha=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===Ie.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),a=Fe("input");a.type=i?"file":"hidden",a.name=e.query("GET_NAME"),e.ref.fields[t.id]=a,pn(e)},Ya=({root:e,action:t})=>{const n=Ft(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Ur(n,[r.file])},za=({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout(()=>{const n=Ft(e,t.id);n&&Ur(n,[t.file])},0)},Wa=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},ka=({root:e,action:t})=>{const n=Ft(e,t.id);n&&(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},$a=({root:e,action:t})=>{const n=Ft(e,t.id);n&&(t.value===null?n.removeAttribute("value"):n.type!="file"&&(n.value=t.value),pn(e))},Xa=Se({DID_SET_DISABLED:Wa,DID_ADD_ITEM:Ha,DID_LOAD_ITEM:Ya,DID_REMOVE_ITEM:ka,DID_DEFINE_VALUE:$a,DID_PREPARE_OUTPUT:za,DID_REORDER_ITEMS:jn,DID_SORT_ITEMS:jn}),ja=Ee({tag:"fieldset",name:"data",create:qa,write:Xa,ignoreRect:!0}),Qa=e=>"getRootNode"in e?e.getRootNode():document,Za=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Ka=["css","csv","html","txt"],Ja={zip:"zip|compressed",epub:"application/epub+zip"},Br=(e="")=>(e=e.toLowerCase(),Za.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Ka.includes(e)?"text/"+e:Ja[e]||""),_n=e=>new Promise((t,n)=>{const r=oo(e);if(r.length&&!eo(e))return t(r);to(e).then(t)}),eo=e=>e.files?e.files.length>0:!1,to=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>no(i)).map(i=>ro(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const a=[];i.forEach(s=>{a.push.apply(a,s)}),t(a.filter(s=>s).map(s=>(s._relativePath||(s._relativePath=s.webkitRelativePath),s)))}).catch(console.error)}),no=e=>{if(xr(e)){const t=In(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},ro=e=>new Promise((t,n)=>{if(ao(e)){io(In(e)).then(t).catch(n);return}t([e.getAsFile()])}),io=e=>new Promise((t,n)=>{const r=[];let i=0,a=0;const s=()=>{a===0&&i===0&&t(r)},l=o=>{i++;const u=o.createReader(),c=()=>{u.readEntries(f=>{if(f.length===0){i--,s();return}f.forEach(I=>{I.isDirectory?l(I):(a++,I.file(m=>{const E=so(m);I.fullPath&&(E._relativePath=I.fullPath),r.push(E),a--,s()}))}),c()},n)};c()};l(e)}),so=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=Br(Gt(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},ao=e=>xr(e)&&(In(e)||{}).isDirectory,xr=e=>"webkitGetAsEntry"in e,In=e=>e.webkitGetAsEntry(),oo=e=>{let t=[];try{if(t=co(e),t.length)return t;t=lo(e)}catch{}return t},lo=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},co=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},Pt=[],We=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),uo=(e,t,n)=>{const r=fo(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},fo=e=>{const t=Pt.find(r=>r.element===e);if(t)return t;const n=Eo(e);return Pt.push(n),n},Eo=e=>{const t=[],n={dragenter:_o,dragover:Io,dragleave:mo,drop:go},r={};ce(n,(a,s)=>{r[a]=s(e,t),e.addEventListener(a,r[a],!1)});const i={element:e,addListener:a=>(t.push(a),()=>{t.splice(t.indexOf(a),1),t.length===0&&(Pt.splice(Pt.indexOf(i),1),ce(n,s=>{e.removeEventListener(s,r[s],!1)}))})};return i},po=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),gn=(e,t)=>{const n=Qa(t),r=po(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let Vr=null;const gt=(e,t)=>{try{e.dropEffect=t}catch{}},_o=(e,t)=>n=>{n.preventDefault(),Vr=n.target,t.forEach(r=>{const{element:i,onenter:a}=r;gn(n,i)&&(r.state="enter",a(We(n)))})},Io=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;_n(r).then(i=>{let a=!1;t.some(s=>{const{filterElement:l,element:o,onenter:u,onexit:c,ondrag:f,allowdrop:I}=s;gt(r,"copy");const m=I(i);if(!m){gt(r,"none");return}if(gn(n,o)){if(a=!0,s.state===null){s.state="enter",u(We(n));return}if(s.state="over",l&&!m){gt(r,"none");return}f(We(n))}else l&&!a&&gt(r,"none"),s.state&&(s.state=null,c(We(n)))})})},go=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;_n(r).then(i=>{t.forEach(a=>{const{filterElement:s,element:l,ondrop:o,onexit:u,allowdrop:c}=a;if(a.state=null,!(s&&!gn(n,l))){if(!c(i))return u(We(n));o(We(n),i)}})})},mo=(e,t)=>n=>{Vr===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(We(n))})},To=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:a=c=>c}=n,s=uo(e,r?document.documentElement:e,i);let l="",o="";s.allowdrop=c=>t(a(c)),s.ondrop=(c,f)=>{const I=a(f);if(!t(I)){u.ondragend(c);return}o="drag-drop",u.onload(I,c)},s.ondrag=c=>{u.ondrag(c)},s.onenter=c=>{o="drag-over",u.ondragstart(c)},s.onexit=c=>{o="drag-exit",u.ondragend(c)};const u={updateHopperState:()=>{l!==o&&(e.dataset.hopperState=o,l=o)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{s.destroy()}};return u};let Kt=!1;const Je=[],qr=e=>{const t=document.activeElement;if(t&&(/textarea|input/i.test(t.nodeName)||t.getAttribute("contenteditable")==="true"||t.getAttribute("contenteditable")==="")){let r=!1,i=t;for(;i!==document.body;){if(i.classList.contains("filepond--root")){r=!0;break}i=i.parentNode}if(!r)return}_n(e.clipboardData).then(r=>{r.length&&Je.forEach(i=>i(r))})},ho=e=>{Je.includes(e)||(Je.push(e),!Kt&&(Kt=!0,document.addEventListener("paste",qr)))},Ro=e=>{ln(Je,Je.indexOf(e)),Je.length===0&&(document.removeEventListener("paste",qr),Kt=!1)},Oo=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{Ro(e)},onload:()=>{}};return ho(e),t},Ao=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,ge(e.element,"role","alert"),ge(e.element,"aria-live","polite"),ge(e.element,"aria-relevant","additions")};let Qn=null,Zn=null;const zt=[],Ut=(e,t)=>{e.element.textContent=t},Do=e=>{e.element.textContent=""},Hr=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");Ut(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Zn),Zn=setTimeout(()=>{Do(e)},1500)},Yr=e=>e.element.parentNode.contains(document.activeElement),So=({root:e,action:t})=>{if(!Yr(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);zt.push(n.filename),clearTimeout(Qn),Qn=setTimeout(()=>{Hr(e,zt.join(", "),e.query("GET_LABEL_FILE_ADDED")),zt.length=0},750)},yo=({root:e,action:t})=>{if(!Yr(e))return;const n=t.item;Hr(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},Po=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Ut(e,`${r} ${i}`)},Kn=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Ut(e,`${r} ${i}`)},mt=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Ut(e,`${t.status.main} ${r} ${t.status.sub}`)},Lo=Ee({create:Ao,ignoreRect:!0,ignoreRectUpdate:!0,write:Se({DID_LOAD_ITEM:So,DID_REMOVE_ITEM:yo,DID_COMPLETE_ITEM_PROCESSING:Po,DID_ABORT_ITEM_PROCESSING:Kn,DID_REVERT_ITEM_PROCESSING:Kn,DID_THROW_ITEM_REMOVE_ERROR:mt,DID_THROW_ITEM_LOAD_ERROR:mt,DID_THROW_ITEM_INVALID:mt,DID_THROW_ITEM_PROCESSING_ERROR:mt}),tag:"span",name:"assistant"}),zr=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Wr=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...a)=>{clearTimeout(i);const s=Date.now()-r,l=()=>{r=Date.now(),e(...a)};s<t?n||(i=setTimeout(l,t-s)):l()}},vo=1e6,Lt=e=>e.preventDefault(),Mo=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(o=>o.length).forEach(o=>{e.element.classList.add(o)}),e.ref.label=e.appendChildView(e.createChildView(Ca,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(ya,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Mr,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Lo,{...t})),e.ref.data=e.appendChildView(e.createChildView(ja,{...t})),e.ref.measure=Fe("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(o=>!Ge(o.value)).map(({name:o,value:u})=>{e.element.dataset[o]=u}),e.ref.widthPrevious=null,e.ref.widthUpdated=Wr(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&a&&!i&&(e.element.addEventListener("touchmove",Lt,{passive:!1}),e.element.addEventListener("gesturestart",Lt));const s=e.query("GET_CREDITS");if(s.length===2){const o=document.createElement("a");o.className="filepond--credits",o.href=s[0],o.tabIndex=-1,o.target="_blank",o.rel="noopener noreferrer nofollow",o.textContent=s[1],e.element.appendChild(o),e.ref.credits=o}},wo=({root:e,props:t,actions:n})=>{if(Fo({root:e,props:t,actions:n}),n.filter(X=>/^DID_SET_STYLE_/.test(X.type)).filter(X=>!Ge(X.data.value)).map(({type:X,data:te})=>{const N=zr(X.substring(8).toLowerCase(),"_");e.element.dataset[N]=te.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=No(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:a,list:s,panel:l}=e.ref;i&&i.updateHopperState();const o=e.query("GET_PANEL_ASPECT_RATIO"),u=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),f=u?e.query("GET_MAX_FILES")||vo:1,I=c===f,m=n.find(X=>X.type==="DID_ADD_ITEM");if(I&&m){const X=m.data.interactionMethod;a.opacity=0,u?a.translateY=-40:X===Me.API?a.translateX=40:X===Me.BROWSE?a.translateY=40:a.translateY=30}else I||(a.opacity=1,a.translateX=0,a.translateY=0);const E=Co(e),T=bo(e),v=a.rect.element.height,D=!u||I?0:v,b=I?s.rect.element.marginTop:0,B=c===0?0:s.rect.element.marginBottom,x=D+b+T.visual+B,V=D+b+T.bounds+B;if(s.translateY=Math.max(0,D-s.rect.element.marginTop)-E.top,o){const X=e.rect.element.width,te=X*o;o!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=o,e.ref.updateHistory=[]);const N=e.ref.updateHistory;N.push(X);const Y=2;if(N.length>Y*2){const z=N.length,j=z-10;let ue=0;for(let A=z;A>=j;A--)if(N[A]===N[A-2]&&ue++,ue>=Y)return}l.scalable=!1,l.height=te;const K=te-D-(B-E.bottom)-(I?b:0);T.visual>K?s.overflow=K:s.overflow=null,e.height=te}else if(r.fixedHeight){l.scalable=!1;const X=r.fixedHeight-D-(B-E.bottom)-(I?b:0);T.visual>X?s.overflow=X:s.overflow=null}else if(r.cappedHeight){const X=x>=r.cappedHeight,te=Math.min(r.cappedHeight,x);l.scalable=!0,l.height=X?te:te-E.top-E.bottom;const N=te-D-(B-E.bottom)-(I?b:0);x>r.cappedHeight&&T.visual>N?s.overflow=N:s.overflow=null,e.height=Math.min(r.cappedHeight,V-E.top-E.bottom)}else{const X=c>0?E.top+E.bottom:0;l.scalable=!0,l.height=Math.max(v,x-X),e.height=Math.max(v,V-X)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},Co=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},bo=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],a=i.childViews.filter(b=>b.rect.element.height),s=e.query("GET_ACTIVE_ITEMS").map(b=>a.find(B=>B.id===b.id)).filter(b=>b);if(s.length===0)return{visual:t,bounds:n};const l=i.rect.element.width,o=En(i,s,r.dragCoordinates),u=s[0].rect.element,c=u.marginTop+u.marginBottom,f=u.marginLeft+u.marginRight,I=u.width+f,m=u.height+c,E=typeof o<"u"&&o>=0?1:0,T=s.find(b=>b.markedForRemoval&&b.opacity<.45)?-1:0,v=s.length+E+T,D=fn(l,I);return D===1?s.forEach(b=>{const B=b.rect.element.height+c;n+=B,t+=B*b.opacity}):(n=Math.ceil(v/D)*m,t=n),{visual:t,bounds:n}},No=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},mn=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let a=e.query("GET_MAX_FILES");const s=t.length;return!r&&s>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:de("warning",0,"Max files")}),!0):(a=r?a:1,!r&&n?!1:nt(a)&&i+s>a?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:de("warning",0,"Max files")}),!0):!1)},Go=(e,t,n)=>{const r=e.childViews[0];return En(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Jn=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=To(e.element,a=>{const s=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?a.every(o=>ke("ALLOW_HOPPER_ITEM",o,{query:e.query}).every(u=>u===!0)&&s(o)):!0},{filterItems:a=>{const s=e.query("GET_IGNORED_FILES");return a.filter(l=>ze(l)?!s.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(a,s)=>{const o=e.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),u=e.query("GET_ACTIVE_ITEMS").map(c=>o.find(f=>f.id===c.id)).filter(c=>c);we("ADD_ITEMS",a,{dispatch:e.dispatch}).then(c=>{if(mn(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:Go(e.ref.list,u,s),interactionMethod:Me.DROP})}),e.dispatch("DID_DROP",{position:s}),e.dispatch("DID_END_DRAG",{position:s})},i.ondragstart=a=>{e.dispatch("DID_START_DRAG",{position:a})},i.ondrag=Wr(a=>{e.dispatch("DID_DRAG",{position:a})}),i.ondragend=a=>{e.dispatch("DID_END_DRAG",{position:a})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Va))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},er=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ma,{...t,onload:a=>{we("ADD_ITEMS",a,{dispatch:e.dispatch}).then(s=>{if(mn(e,s))return!1;e.dispatch("ADD_ITEMS",{items:s,index:-1,interactionMethod:Me.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},tr=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=Oo(),e.ref.paster.onload=i=>{we("ADD_ITEMS",i,{dispatch:e.dispatch}).then(a=>{if(mn(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Me.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Fo=Se({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{er(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Jn(e)},DID_SET_ALLOW_PASTE:({root:e})=>{tr(e)},DID_SET_DISABLED:({root:e,props:t})=>{Jn(e),tr(e),er(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),Uo=Ee({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Mo,write:wo,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Lt),e.element.removeEventListener("gesturestart",Lt)},mixins:{styles:["height"]}}),Bo=(e={})=>{let t=null;const n=yt(),r=ei(xi(n),[rs,Hi(n)],[Ls,qi(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let a=null,s=!1,l=!1,o=null,u=null;const c=()=>{s||(s=!0),clearTimeout(a),a=setTimeout(()=>{s=!1,o=null,u=null,l&&(l=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const f=Uo(r,{id:on()});let I=!1,m=!1;const E={_read:()=>{s&&(u=window.innerWidth,o||(o=u),!l&&u!==o&&(r.dispatch("DID_START_RESIZE"),l=!0)),m&&I&&(I=f.element.offsetParent===null),!I&&(f._read(),m=f.rect.element.hidden)},_write:h=>{const L=r.processActionQueue().filter(q=>!/^SET_/.test(q.type));I&&!L.length||(b(L),I=f._write(h,L,l),Wi(r.query("GET_ITEMS")),I&&r.processDispatchQueue())}},T=h=>L=>{const q={type:h};if(!L)return q;if(L.hasOwnProperty("error")&&(q.error=L.error?{...L.error}:null),L.status&&(q.status={...L.status}),L.file&&(q.output=L.file),L.source)q.file=L.source;else if(L.item||L.id){const k=L.item?L.item:r.query("GET_ITEM",L.id);q.file=k?ye(k):null}return L.items&&(q.items=L.items.map(ye)),/progress/.test(h)&&(q.progress=L.progress),L.hasOwnProperty("origin")&&L.hasOwnProperty("target")&&(q.origin=L.origin,q.target=L.target),q},v={DID_DESTROY:T("destroy"),DID_INIT:T("init"),DID_THROW_MAX_FILES:T("warning"),DID_INIT_ITEM:T("initfile"),DID_START_ITEM_LOAD:T("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:T("addfileprogress"),DID_LOAD_ITEM:T("addfile"),DID_THROW_ITEM_INVALID:[T("error"),T("addfile")],DID_THROW_ITEM_LOAD_ERROR:[T("error"),T("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[T("error"),T("removefile")],DID_PREPARE_OUTPUT:T("preparefile"),DID_START_ITEM_PROCESSING:T("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:T("processfileprogress"),DID_ABORT_ITEM_PROCESSING:T("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:T("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:T("processfiles"),DID_REVERT_ITEM_PROCESSING:T("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[T("error"),T("processfile")],DID_REMOVE_ITEM:T("removefile"),DID_UPDATE_ITEMS:T("updatefiles"),DID_ACTIVATE_ITEM:T("activatefile"),DID_REORDER_ITEMS:T("reorderfiles")},D=h=>{const L={pond:J,...h};delete L.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${h.type}`,{detail:L,bubbles:!0,cancelable:!0,composed:!0}));const q=[];h.hasOwnProperty("error")&&q.push(h.error),h.hasOwnProperty("file")&&q.push(h.file);const k=["type","error","file"];Object.keys(h).filter(Z=>!k.includes(Z)).forEach(Z=>q.push(h[Z])),J.fire(h.type,...q);const ae=r.query(`GET_ON${h.type.toUpperCase()}`);ae&&ae(...q)},b=h=>{h.length&&h.filter(L=>v[L.type]).forEach(L=>{const q=v[L.type];(Array.isArray(q)?q:[q]).forEach(k=>{L.type==="DID_INIT_ITEM"?D(k(L.data)):setTimeout(()=>{D(k(L.data))},0)})})},B=h=>r.dispatch("SET_OPTIONS",{options:h}),x=h=>r.query("GET_ACTIVE_ITEM",h),V=h=>new Promise((L,q)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:h,success:k=>{L(k)},failure:k=>{q(k)}})}),X=(h,L={})=>new Promise((q,k)=>{Y([{source:h,options:L}],{index:L.index}).then(ae=>q(ae&&ae[0])).catch(k)}),te=h=>h.file&&h.id,N=(h,L)=>(typeof h=="object"&&!te(h)&&!L&&(L=h,h=void 0),r.dispatch("REMOVE_ITEM",{...L,query:h}),r.query("GET_ACTIVE_ITEM",h)===null),Y=(...h)=>new Promise((L,q)=>{const k=[],ae={};if(wt(h[0]))k.push.apply(k,h[0]),Object.assign(ae,h[1]||{});else{const Z=h[h.length-1];typeof Z=="object"&&!(Z instanceof Blob)&&Object.assign(ae,h.pop()),k.push(...h)}r.dispatch("ADD_ITEMS",{items:k,index:ae.index,interactionMethod:Me.API,success:L,failure:q})}),K=()=>r.query("GET_ACTIVE_ITEMS"),z=h=>new Promise((L,q)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:h,success:k=>{L(k)},failure:k=>{q(k)}})}),j=(...h)=>{const L=Array.isArray(h[0])?h[0]:h,q=L.length?L:K();return Promise.all(q.map(V))},ue=(...h)=>{const L=Array.isArray(h[0])?h[0]:h;if(!L.length){const q=K().filter(k=>!(k.status===Q.IDLE&&k.origin===Ie.LOCAL)&&k.status!==Q.PROCESSING&&k.status!==Q.PROCESSING_COMPLETE&&k.status!==Q.PROCESSING_REVERT_ERROR);return Promise.all(q.map(z))}return Promise.all(L.map(z))},A=(...h)=>{const L=Array.isArray(h[0])?h[0]:h;let q;typeof L[L.length-1]=="object"?q=L.pop():Array.isArray(h[0])&&(q=h[1]);const k=K();return L.length?L.map(Z=>xe(Z)?k[Z]?k[Z].id:null:Z).filter(Z=>Z).map(Z=>N(Z,q)):Promise.all(k.map(Z=>N(Z,q)))},J={...Nt(),...E,...Vi(r,n),setOptions:B,addFile:X,addFiles:Y,getFile:x,processFile:z,prepareFile:V,removeFile:N,moveFile:(h,L)=>r.dispatch("MOVE_ITEM",{query:h,index:L}),getFiles:K,processFiles:ue,removeFiles:A,prepareFiles:j,sort:h=>r.dispatch("SORT",{compare:h}),browse:()=>{var h=f.element.querySelector("input[type=file]");h&&h.click()},destroy:()=>{J.fire("destroy",f.element),r.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:h=>Dn(f.element,h),insertAfter:h=>Sn(f.element,h),appendTo:h=>h.appendChild(f.element),replaceElement:h=>{Dn(f.element,h),h.parentNode.removeChild(h),t=h},restoreElement:()=>{t&&(Sn(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:h=>f.element===h||t===h,element:{get:()=>f.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Be(J)},kr=(e={})=>{const t={};return ce(yt(),(r,i)=>{t[r]=i[0]}),Bo({...t,...e})},xo=e=>e.charAt(0).toLowerCase()+e.slice(1),Vo=e=>zr(e.replace(/^data-/,"")),$r=(e,t)=>{ce(t,(n,r)=>{ce(e,(i,a)=>{const s=new RegExp(n);if(!s.test(i)||(delete e[i],r===!1))return;if(De(r)){e[r]=a;return}const o=r.group;he(r)&&!e[o]&&(e[o]={}),e[o][xo(i.replace(s,""))]=a}),r.mapping&&$r(e[r.group],r.mapping)})},qo=(e,t={})=>{const n=[];ce(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,a)=>{const s=ge(e,a.name);return i[Vo(a.name)]=s===a.name?!0:s,i},{});return $r(r,t),r},Ho=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};ke("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=qo(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(s=>{he(i[s])?(he(r[s])||(r[s]={}),Object.assign(r[s],i[s])):r[s]=i[s]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(s=>({source:s.value,options:{type:s.dataset.type}})));const a=kr(r);return e.files&&Array.from(e.files).forEach(s=>{a.addFile(s)}),a.replaceElement(e),a},Yo=(...e)=>Jr(e[0])?Ho(...e):kr(...e),zo=["fire","_read","_write"],nr=e=>{const t={};return pr(e,t,zo),t},Wo=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),ko=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,a)=>{},post:(i,a,s)=>{const l=on();r.onmessage=o=>{o.data.id===l&&a(o.data.message)},r.postMessage({id:l,message:i},s)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},$o=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Xr=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Xo=e=>Xr(e,e.name),rr=[],jo=e=>{if(rr.includes(e))return;rr.push(e);const t=e({addFilter:$i,utils:{Type:O,forin:ce,isString:De,isFile:ze,toNaturalFileSize:Pr,replaceInString:Wo,getExtensionFromFilename:Gt,getFilenameWithoutExtension:Dr,guesstimateMimeType:Br,getFileFromBlob:tt,getFilenameFromURL:lt,createRoute:Se,createWorker:ko,createView:Ee,createItemAPI:ye,loadImage:$o,copyFile:Xo,renameFile:Xr,createBlob:Rr,applyFilterChain:we,text:fe,getNumericAspectRatioFromString:gr},views:{fileActionButton:yr}});Xi(t.options)},Qo=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",Zo=()=>"Promise"in window,Ko=()=>"slice"in Blob.prototype,Jo=()=>"URL"in window&&"createObjectURL"in window.URL,el=()=>"visibilityState"in document,tl=()=>"performance"in window,nl=()=>"supports"in(window.CSS||{}),rl=()=>/MSIE|Trident/.test(window.navigator.userAgent),Jt=(()=>{const e=lr()&&!Qo()&&el()&&Zo()&&Ko()&&Jo()&&tl()&&(nl()||rl());return()=>e})(),Ue={apps:[]},il="filepond",$e=()=>{};let jr={},Qr={},Zr={},en={},et=$e,ht=$e,tn=$e,nn=$e,vt=$e,rn=$e,sn=$e;if(Jt()){Si(()=>{Ue.apps.forEach(n=>n._read())},n=>{Ue.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Jt,create:et,destroy:ht,parse:tn,find:nn,registerPlugin:vt,setOptions:sn}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>ce(yt(),(n,r)=>{en[n]=r[1]});jr={...mr},Zr={...Ie},Qr={...Q},en={},t(),et=(...n)=>{const r=Yo(...n);return r.on("destroy",ht),Ue.apps.push(r),nr(r)},ht=n=>{const r=Ue.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(Ue.apps.splice(r,1)[0].restoreElement(),!0):!1},tn=n=>Array.from(n.querySelectorAll(`.${il}`)).filter(a=>!Ue.apps.find(s=>s.isAttachedTo(a))).map(a=>et(a)),nn=n=>{const r=Ue.apps.find(i=>i.isAttachedTo(n));return r?nr(r):null},vt=(...n)=>{n.forEach(jo),t()},rn=()=>{const n={};return ce(yt(),(r,i)=>{n[r]=i[0]}),n},sn=n=>(he(n)&&(Ue.apps.forEach(r=>{r.setOptions(n)}),ji(n)),rn())}const sl=Object.freeze(Object.defineProperty({__proto__:null,get FileOrigin(){return Zr},get FileStatus(){return Qr},get OptionTypes(){return en},get Status(){return jr},get create(){return et},get destroy(){return ht},get find(){return nn},get getOptions(){return rn},get parse(){return tn},get registerPlugin(){return vt},get setOptions(){return sn},supported:Jt},Symbol.toStringTag,{value:"Module"}));var Rt={exports:{}};var al=Rt.exports,ir;function ol(){return ir||(ir=1,(function(e,t){(function(n,r){e.exports=r()})(al,function(){function n(d,p){return r(d)||(function(g,R){var G=[],S=!0,F=!1,U=void 0;try{for(var y,_=g[Symbol.iterator]();!(S=(y=_.next()).done)&&(G.push(y.value),!R||G.length!==R);S=!0);}catch(P){F=!0,U=P}finally{try{S||_.return==null||_.return()}finally{if(F)throw U}}return G})(d,p)||i()}function r(d){if(Array.isArray(d))return d}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var a=function(d,p){return o(d.x*p,d.y*p)},s=function(d,p){return o(d.x+p.x,d.y+p.y)},l=function(d,p,g){var R=Math.cos(p),G=Math.sin(p),S=o(d.x-g.x,d.y-g.y);return o(g.x+R*S.x-G*S.y,g.y+G*S.x+R*S.y)},o=function(){return{x:arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,y:arguments.length>1&&arguments[1]!==void 0?arguments[1]:0}},u=function(d,p){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,R=arguments.length>3?arguments[3]:void 0;return typeof d=="string"?parseFloat(d)*g:typeof d=="number"?d*(R?p[R]:Math.min(p.width,p.height)):void 0},c=function(d){return d!=null},f=function(d,p){return Object.keys(p).forEach(function(g){return d.setAttribute(g,p[g])})},I=function(d,p){var g=document.createElementNS("http://www.w3.org/2000/svg",d);return p&&f(g,p),g},m={contain:"xMidYMid meet",cover:"xMidYMid slice"},E={left:"start",center:"middle",right:"end"},T=function(d){return function(p){return I(d,{id:p.id})}},v={image:function(d){var p=I("image",{id:d.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return p.onload=function(){p.setAttribute("opacity",d.opacity||1)},p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.src),p},rect:T("rect"),ellipse:T("ellipse"),text:T("text"),path:T("path"),line:function(d){var p=I("g",{id:d.id,"stroke-linecap":"round","stroke-linejoin":"round"}),g=I("line");p.appendChild(g);var R=I("path");p.appendChild(R);var G=I("path");return p.appendChild(G),p}},D={rect:function(d){return f(d,Object.assign({},d.rect,d.styles))},ellipse:function(d){var p=d.rect.x+.5*d.rect.width,g=d.rect.y+.5*d.rect.height,R=.5*d.rect.width,G=.5*d.rect.height;return f(d,Object.assign({cx:p,cy:g,rx:R,ry:G},d.styles))},image:function(d,p){f(d,Object.assign({},d.rect,d.styles,{preserveAspectRatio:m[p.fit]||"none"}))},text:function(d,p,g,R){var G=u(p.fontSize,g,R),S=p.fontFamily||"sans-serif",F=p.fontWeight||"normal",U=E[p.textAlign]||"start";f(d,Object.assign({},d.rect,d.styles,{"stroke-width":0,"font-weight":F,"font-size":G,"font-family":S,"text-anchor":U})),d.text!==p.text&&(d.text=p.text,d.textContent=p.text.length?p.text:" ")},path:function(d,p,g,R){var G;f(d,Object.assign({},d.styles,{fill:"none",d:(G=p.points.map(function(S){return{x:u(S.x,g,R,"width"),y:u(S.y,g,R,"height")}}),G.map(function(S,F){return"".concat(F===0?"M":"L"," ").concat(S.x," ").concat(S.y)}).join(" "))}))},line:function(d,p,g,R){f(d,Object.assign({},d.rect,d.styles,{fill:"none"}));var G=d.childNodes[0],S=d.childNodes[1],F=d.childNodes[2],U=d.rect,y={x:d.rect.x+d.rect.width,y:d.rect.y+d.rect.height};if(f(G,{x1:U.x,y1:U.y,x2:y.x,y2:y.y}),p.lineDecoration){S.style.display="none",F.style.display="none";var _=(function(ie){var W=Math.sqrt(ie.x*ie.x+ie.y*ie.y);return W===0?{x:0,y:0}:o(ie.x/W,ie.y/W)})({x:y.x-U.x,y:y.y-U.y}),P=u(.05,g,R);if(p.lineDecoration.indexOf("arrow-begin")!==-1){var w=a(_,P),M=s(U,w),C=l(U,2,M),H=l(U,-2,M);f(S,{style:"display:block;",d:"M".concat(C.x,",").concat(C.y," L").concat(U.x,",").concat(U.y," L").concat(H.x,",").concat(H.y)})}if(p.lineDecoration.indexOf("arrow-end")!==-1){var $=a(_,-P),ne=s(y,$),ee=l(y,2,ne),re=l(y,-2,ne);f(F,{style:"display:block;",d:"M".concat(ee.x,",").concat(ee.y," L").concat(y.x,",").concat(y.y," L").concat(re.x,",").concat(re.y)})}}}},b=function(d,p,g,R,G){p!=="path"&&(d.rect=(function(S,F){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,y=u(S.x,F,U,"width")||u(S.left,F,U,"width"),_=u(S.y,F,U,"height")||u(S.top,F,U,"height"),P=u(S.width,F,U,"width"),w=u(S.height,F,U,"height"),M=u(S.right,F,U,"width"),C=u(S.bottom,F,U,"height");return c(_)||(_=c(w)&&c(C)?F.height-w-C:C),c(y)||(y=c(P)&&c(M)?F.width-P-M:M),c(P)||(P=c(y)&&c(M)?F.width-y-M:0),c(w)||(w=c(_)&&c(C)?F.height-_-C:0),{x:y||0,y:_||0,width:P||0,height:w||0}})(g,R,G)),d.styles=(function(S,F,U){var y=S.borderStyle||S.lineStyle||"solid",_=S.backgroundColor||S.fontColor||"transparent",P=S.borderColor||S.lineColor||"transparent",w=u(S.borderWidth||S.lineWidth,F,U);return{"stroke-linecap":S.lineCap||"round","stroke-linejoin":S.lineJoin||"round","stroke-width":w||0,"stroke-dasharray":typeof y=="string"?"":y.map(function(M){return u(M,F,U)}).join(","),stroke:P,fill:_,opacity:S.opacity||1}})(g,R,G),D[p](d,g,R,G)},B=["x","y","left","top","right","bottom","width","height"],x=function(d){var p=n(d,2),g=p[0],R=p[1],G=R.points?{}:B.reduce(function(S,F){var U;return S[F]=typeof(U=R[F])=="string"&&/%/.test(U)?parseFloat(U)/100:U,S},{});return[g,Object.assign({zIndex:0},R,G)]},V=function(d,p){return d[1].zIndex>p[1].zIndex?1:d[1].zIndex<p[1].zIndex?-1:0},X=function(d){return d.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(p){var g=p.root,R=p.props;if(R.dirty){var G=R.crop,S=R.resize,F=R.markup,U=R.width,y=R.height,_=G.width,P=G.height;if(S){var w=S.size,M=w&&w.width,C=w&&w.height,H=S.mode,$=S.upscale;M&&!C&&(C=M),C&&!M&&(M=C);var ne=_<M&&P<C;if(!ne||ne&&$){var ee,re=M/_,ie=C/P;H==="force"?(_=M,P=C):(H==="cover"?ee=Math.max(re,ie):H==="contain"&&(ee=Math.min(re,ie)),_*=ee,P*=ee)}}var W={width:U,height:y};g.element.setAttribute("width",W.width),g.element.setAttribute("height",W.height);var oe=Math.min(U/_,y/P);g.element.innerHTML="";var le=g.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");F.filter(le).map(x).sort(V).forEach(function(se){var me=n(se,2),pe=me[0],Re=me[1],Te=(function(_e,Oe){return v[_e](Oe)})(pe,Re);b(Te,pe,Re,W,oe),g.element.appendChild(Te)})}}})},te=function(d,p){return{x:d,y:p}},N=function(d,p){return te(d.x-p.x,d.y-p.y)},Y=function(d,p){return Math.sqrt((function(g,R){return(function(G,S){return G.x*S.x+G.y*S.y})(N(g,R),N(g,R))})(d,p))},K=function(d,p){var g=d,R=p,G=1.5707963267948966-p,S=Math.sin(1.5707963267948966),F=Math.sin(R),U=Math.sin(G),y=Math.cos(G),_=g/S;return te(y*(_*F),y*(_*U))},z=function(d,p,g,R){var G=R.x>.5?1-R.x:R.x,S=R.y>.5?1-R.y:R.y,F=2*G*d.width,U=2*S*d.height,y=(function(_,P){var w=_.width,M=_.height,C=K(w,P),H=K(M,P),$=te(_.x+Math.abs(C.x),_.y-Math.abs(C.y)),ne=te(_.x+_.width+Math.abs(H.y),_.y+Math.abs(H.x)),ee=te(_.x-Math.abs(H.y),_.y+_.height-Math.abs(H.x));return{width:Y($,ne),height:Y($,ee)}})(p,g);return Math.max(y.width/F,y.height/U)},j=function(d,p){var g=d.width,R=g*p;return R>d.height&&(g=(R=d.height)/p),{x:.5*(d.width-g),y:.5*(d.height-R),width:g,height:R}},ue=function(d){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=p.zoom,R=p.rotation,G=p.center,S=p.aspectRatio;S||(S=d.height/d.width);var F=(function(P,w){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=P.height/P.width,H=w,$=1,ne=C;ne>H&&($=(ne=H)/C);var ee=Math.max(1/$,H/ne),re=P.width/(M*ee*$);return{width:re,height:re*w}})(d,S,g),U={width:F.width,height:F.height},y=p.scaleToFit===void 0||p.scaleToFit,_=g*z(d,j(U,S),R,y?G:{x:.5,y:.5});return{widthFloat:F.width/_,heightFloat:F.height/_,width:Math.round(F.width/_),height:Math.round(F.height/_)}},A={type:"spring",stiffness:.5,damping:.45,mass:10},J=function(d){return d.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(p){var g=p.root,R=p.props;R.background&&(g.element.style.backgroundColor=R.background)},create:function(p){var g=p.root,R=p.props;g.ref.image=g.appendChildView(g.createChildView((function(S){return S.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:A,originY:A,scaleX:A,scaleY:A,translateX:A,translateY:A,rotateZ:A}},create:function(F){var U=F.root,y=F.props;y.width=y.image.width,y.height=y.image.height,U.ref.bitmap=U.appendChildView(U.createChildView((function(_){return _.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(P){var w=P.root,M=P.props;w.appendChild(M.image)}})})(S),{image:y.image}))},write:function(F){var U=F.root,y=F.props.crop.flip,_=U.ref.bitmap;_.scaleX=y.horizontal?-1:1,_.scaleY=y.vertical?-1:1}})})(d),Object.assign({},R))),g.ref.createMarkup=function(){g.ref.markup||(g.ref.markup=g.appendChildView(g.createChildView(X(d),Object.assign({},R))))},g.ref.destroyMarkup=function(){g.ref.markup&&(g.removeChildView(g.ref.markup),g.ref.markup=null)};var G=g.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");G!==null&&(g.element.dataset.transparencyIndicator=G==="grid"?G:"color")},write:function(p){var g=p.root,R=p.props,G=p.shouldOptimize,S=R.crop,F=R.markup,U=R.resize,y=R.dirty,_=R.width,P=R.height;g.ref.image.crop=S;var w={width:_,height:P,center:{x:.5*_,y:.5*P}},M={width:g.ref.image.width,height:g.ref.image.height},C={x:S.center.x*M.width,y:S.center.y*M.height},H={x:w.center.x-M.width*S.center.x,y:w.center.y-M.height*S.center.y},$=2*Math.PI+S.rotation%(2*Math.PI),ne=S.aspectRatio||M.height/M.width,ee=S.scaleToFit===void 0||S.scaleToFit,re=z(M,j(w,ne),$,ee?S.center:{x:.5,y:.5}),ie=S.zoom*re;F&&F.length?(g.ref.createMarkup(),g.ref.markup.width=_,g.ref.markup.height=P,g.ref.markup.resize=U,g.ref.markup.dirty=y,g.ref.markup.markup=F,g.ref.markup.crop=ue(M,S)):g.ref.markup&&g.ref.destroyMarkup();var W=g.ref.image;if(G)return W.originX=null,W.originY=null,W.translateX=null,W.translateY=null,W.rotateZ=null,W.scaleX=null,void(W.scaleY=null);W.originX=C.x,W.originY=C.y,W.translateX=H.x,W.translateY=H.y,W.rotateZ=$,W.scaleX=ie,W.scaleY=ie}})},h=0,L=function(){self.onmessage=function(d){createImageBitmap(d.data.message.file).then(function(p){self.postMessage({id:d.data.id,message:p},[p])})}},q=function(){self.onmessage=function(d){for(var p=d.data.message.imageData,g=d.data.message.colorMatrix,R=p.data,G=R.length,S=g[0],F=g[1],U=g[2],y=g[3],_=g[4],P=g[5],w=g[6],M=g[7],C=g[8],H=g[9],$=g[10],ne=g[11],ee=g[12],re=g[13],ie=g[14],W=g[15],oe=g[16],le=g[17],se=g[18],me=g[19],pe=0,Re=0,Te=0,_e=0,Oe=0;pe<G;pe+=4)Re=R[pe]/255,Te=R[pe+1]/255,_e=R[pe+2]/255,Oe=R[pe+3]/255,R[pe]=Math.max(0,Math.min(255*(Re*S+Te*F+_e*U+Oe*y+_),255)),R[pe+1]=Math.max(0,Math.min(255*(Re*P+Te*w+_e*M+Oe*C+H),255)),R[pe+2]=Math.max(0,Math.min(255*(Re*$+Te*ne+_e*ee+Oe*re+ie),255)),R[pe+3]=Math.max(0,Math.min(255*(Re*W+Te*oe+_e*le+Oe*se+me),255));self.postMessage({id:d.data.id,message:p},[p.data.buffer])}},k={1:function(){return[1,0,0,1,0,0]},2:function(d){return[-1,0,0,1,d,0]},3:function(d,p){return[-1,0,0,-1,d,p]},4:function(d,p){return[1,0,0,-1,0,p]},5:function(){return[0,1,1,0,0,0]},6:function(d,p){return[0,1,-1,0,p,0]},7:function(d,p){return[0,-1,-1,0,p,d]},8:function(d){return[0,-1,1,0,0,d]}},ae=function(d,p,g,R){p=Math.round(p),g=Math.round(g);var G=document.createElement("canvas");G.width=p,G.height=g;var S=G.getContext("2d");if(R>=5&&R<=8){var F=[g,p];p=F[0],g=F[1]}return(function(U,y,_,P){P!==-1&&U.transform.apply(U,k[P](y,_))})(S,p,g,R),S.drawImage(d,0,0,p,g),G},Z=function(d){return/^image/.test(d.type)&&!/svg/.test(d.type)},Xe=function(d){var p=Math.min(10/d.width,10/d.height),g=document.createElement("canvas"),R=g.getContext("2d"),G=g.width=Math.ceil(d.width*p),S=g.height=Math.ceil(d.height*p);R.drawImage(d,0,0,G,S);var F=null;try{F=R.getImageData(0,0,G,S).data}catch{return null}for(var U=F.length,y=0,_=0,P=0,w=0;w<U;w+=4)y+=F[w]*F[w],_+=F[w+1]*F[w+1],P+=F[w+2]*F[w+2];return{r:y=je(y,U),g:_=je(_,U),b:P=je(P,U)}},je=function(d,p){return Math.floor(Math.sqrt(d/(p/4)))},Ne=function(d){var p=d.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(y){var _=y.root,P=y.props,w=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`;if(document.querySelector("base")){var M=new URL(window.location.href.replace(window.location.hash,"")).href;w=w.replace(/url\(\#/g,"url("+M+"#")}h++,_.element.classList.add("filepond--image-preview-overlay-".concat(P.status)),_.element.innerHTML=w.replace(/__UID__/g,h)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),g=(function(y){return y.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:A,scaleY:A,translateY:A,opacity:{type:"tween",duration:400}}},create:function(_){var P=_.root,w=_.props;P.ref.clip=P.appendChildView(P.createChildView(J(y),{id:w.id,image:w.image,crop:w.crop,markup:w.markup,resize:w.resize,dirty:w.dirty,background:w.background}))},write:function(_){var P=_.root,w=_.props,M=_.shouldOptimize,C=P.ref.clip,H=w.image,$=w.crop,ne=w.markup,ee=w.resize,re=w.dirty;if(C.crop=$,C.markup=ne,C.resize=ee,C.dirty=re,C.opacity=M?0:1,!M&&!P.rect.element.hidden){var ie=H.height/H.width,W=$.aspectRatio||ie,oe=P.rect.inner.width,le=P.rect.inner.height,se=P.query("GET_IMAGE_PREVIEW_HEIGHT"),me=P.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),pe=P.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),Re=P.query("GET_PANEL_ASPECT_RATIO"),Te=P.query("GET_ALLOW_MULTIPLE");Re&&!Te&&(se=oe*Re,W=Re);var _e=se!==null?se:Math.max(me,Math.min(oe*W,pe)),Oe=_e/W;Oe>oe&&(_e=(Oe=oe)*W),_e>le&&(_e=le,Oe=le/W),C.width=Oe,C.height=_e}}})})(d),R=d.utils.createWorker,G=function(y,_,P){return new Promise(function(w){y.ref.imageData||(y.ref.imageData=P.getContext("2d").getImageData(0,0,P.width,P.height));var M=(function(H){var $;try{$=new ImageData(H.width,H.height)}catch{$=document.createElement("canvas").getContext("2d").createImageData(H.width,H.height)}return $.data.set(new Uint8ClampedArray(H.data)),$})(y.ref.imageData);if(!_||_.length!==20)return P.getContext("2d").putImageData(M,0,0),w();var C=R(q);C.post({imageData:M,colorMatrix:_},function(H){P.getContext("2d").putImageData(H,0,0),C.terminate(),w()},[M.data.buffer])})},S=function(y){var _=y.root,P=y.props,w=y.image,M=P.id,C=_.query("GET_ITEM",{id:M});if(C){var H,$,ne=C.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},ee=_.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),re=!1;_.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(H=C.getMetadata("markup")||[],$=C.getMetadata("resize"),re=!0);var ie=_.appendChildView(_.createChildView(g,{id:M,image:w,crop:ne,resize:$,markup:H,dirty:re,background:ee,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),_.childViews.length);_.ref.images.push(ie),ie.opacity=1,ie.scaleX=1,ie.scaleY=1,ie.translateY=0,setTimeout(function(){_.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:M})},250)}},F=function(y){var _=y.root;_.ref.overlayShadow.opacity=1,_.ref.overlayError.opacity=0,_.ref.overlaySuccess.opacity=0},U=function(y){var _=y.root;_.ref.overlayShadow.opacity=.25,_.ref.overlayError.opacity=1};return d.utils.createView({name:"image-preview-wrapper",create:function(y){var _=y.root;_.ref.images=[],_.ref.imageData=null,_.ref.imageViewBin=[],_.ref.overlayShadow=_.appendChildView(_.createChildView(p,{opacity:0,status:"idle"})),_.ref.overlaySuccess=_.appendChildView(_.createChildView(p,{opacity:0,status:"success"})),_.ref.overlayError=_.appendChildView(_.createChildView(p,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:function(y){y.root.ref.images.forEach(function(_){_.image.width=1,_.image.height=1})},didWriteView:function(y){y.root.ref.images.forEach(function(_){_.dirty=!1})},write:d.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:function(y){var _=y.root,P=_.ref.images[_.ref.images.length-1];P.translateY=0,P.scaleX=1,P.scaleY=1,P.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:function(y){var _=y.root,P=y.props.id,w=_.query("GET_ITEM",P);if(w){var M,C,H,$=URL.createObjectURL(w.file);M=$,C=function(ne,ee){_.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:P,width:ne,height:ee})},(H=new Image).onload=function(){var ne=H.naturalWidth,ee=H.naturalHeight;H=null,C(ne,ee)},H.src=M}},DID_FINISH_CALCULATE_PREVIEWSIZE:function(y){var _=y.root,P=y.props,w=P.id,M=_.query("GET_ITEM",w);if(M){var C,H,$,ne=URL.createObjectURL(M.file),ee=function(){var W;(W=ne,new Promise(function(oe,le){var se=new Image;se.crossOrigin="Anonymous",se.onload=function(){oe(se)},se.onerror=function(me){le(me)},se.src=W})).then(re)},re=function(W){URL.revokeObjectURL(ne);var oe=(M.getMetadata("exif")||{}).orientation||-1,le=W.width,se=W.height;if(le&&se){if(oe>=5&&oe<=8){var me=[se,le];le=me[0],se=me[1]}var pe=Math.max(1,.75*window.devicePixelRatio),Re=_.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*pe,Te=se/le,_e=_.rect.element.width,Oe=_.rect.element.height,Qe=_e,rt=Qe*Te;Te>1?rt=(Qe=Math.min(le,_e*Re))*Te:Qe=(rt=Math.min(se,Oe*Re))/Te;var ut=ae(W,Qe,rt,oe),dt=function(){var Kr=_.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Xe(data):null;M.setMetadata("color",Kr,!0),"close"in W&&W.close(),_.ref.overlayShadow.opacity=1,S({root:_,props:P,image:ut})},ft=M.getMetadata("filter");ft?G(_,ft,ut).then(dt):dt()}};if(C=M.file,H=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),!(($=H?parseInt(H[1]):null)!==null&&$<=58)&&"createImageBitmap"in window&&Z(C)){var ie=R(L);ie.post({file:M.file},function(W){ie.terminate(),W?re(W):ee()})}else ee()}},DID_UPDATE_ITEM_METADATA:function(y){var _=y.root,P=y.props,w=y.action;if(/crop|filter|markup|resize/.test(w.change.key)&&_.ref.images.length){var M=_.query("GET_ITEM",{id:P.id});if(M)if(/filter/.test(w.change.key)){var C=_.ref.images[_.ref.images.length-1];G(_,w.change.value,C.image)}else{if(/crop|markup|resize/.test(w.change.key)){var H=M.getMetadata("crop"),$=_.ref.images[_.ref.images.length-1];if(H&&H.aspectRatio&&$.crop&&$.crop.aspectRatio&&Math.abs(H.aspectRatio-$.crop.aspectRatio)>1e-5){var ne=(function(ie){var W=ie.root,oe=W.ref.images.shift();return oe.opacity=0,oe.translateY=-15,W.ref.imageViewBin.push(oe),oe})({root:_});S({root:_,props:P,image:(ee=ne.image,(re=re||document.createElement("canvas")).width=ee.width,re.height=ee.height,re.getContext("2d").drawImage(ee,0,0),re)})}else(function(ie){var W=ie.root,oe=ie.props,le=W.query("GET_ITEM",{id:oe.id});if(le){var se=W.ref.images[W.ref.images.length-1];se.crop=le.getMetadata("crop"),se.background=W.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),W.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(se.dirty=!0,se.resize=le.getMetadata("resize"),se.markup=le.getMetadata("markup"))}})({root:_,props:P})}var ee,re}}},DID_THROW_ITEM_LOAD_ERROR:U,DID_THROW_ITEM_PROCESSING_ERROR:U,DID_THROW_ITEM_INVALID:U,DID_COMPLETE_ITEM_PROCESSING:function(y){var _=y.root;_.ref.overlayShadow.opacity=.25,_.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:F,DID_REVERT_ITEM_PROCESSING:F},function(y){var _=y.root,P=_.ref.imageViewBin.filter(function(w){return w.opacity===0});_.ref.imageViewBin=_.ref.imageViewBin.filter(function(w){return w.opacity>0}),P.forEach(function(w){return(function(M,C){M.removeChildView(C),C.image.width=1,C.image.height=1,C._destroy()})(_,w)}),P.length=0})})},ct=function(d){var p=d.addFilter,g=d.utils,R=g.Type,G=g.createRoute,S=g.isFile,F=Ne(d);return p("CREATE_VIEW",function(U){var y=U.is,_=U.view,P=U.query;if(y("file")&&P("GET_ALLOW_IMAGE_PREVIEW")){var w=function(M){M.root.ref.shouldRescale=!0};_.registerWriter(G({DID_RESIZE_ROOT:w,DID_STOP_RESIZE:w,DID_LOAD_ITEM:function(M){var C=M.root,H=M.props.id,$=P("GET_ITEM",H);if($&&S($.file)&&!$.archived){var ne=$.file;if((function(oe){return/^image/.test(oe.type)})(ne)&&P("GET_IMAGE_PREVIEW_FILTER_ITEM")($)){var ee="createImageBitmap"in(window||{}),re=P("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!ee&&re&&ne.size>re)){C.ref.imagePreview=_.appendChildView(_.createChildView(F,{id:H}));var ie=C.query("GET_IMAGE_PREVIEW_HEIGHT");ie&&C.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:$.id,height:ie});var W=!ee&&ne.size>P("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");C.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:H},W)}}}},DID_IMAGE_PREVIEW_CALCULATE_SIZE:function(M){var C=M.root,H=M.action;C.ref.imageWidth=H.width,C.ref.imageHeight=H.height,C.ref.shouldRescale=!0,C.ref.shouldDrawPreview=!0,C.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:function(M){var C=M.root;M.action.change.key==="crop"&&(C.ref.shouldRescale=!0)}},function(M){var C=M.root,H=M.props;C.ref.imagePreview&&(C.rect.element.hidden||(C.ref.shouldRescale&&((function($,ne){if($.ref.imagePreview){var ee=ne.id,re=$.query("GET_ITEM",{id:ee});if(re){var ie=$.query("GET_PANEL_ASPECT_RATIO"),W=$.query("GET_ITEM_PANEL_ASPECT_RATIO"),oe=$.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(ie||W||oe)){var le=$.ref,se=le.imageWidth,me=le.imageHeight;if(se&&me){var pe=$.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),Re=$.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),Te=(re.getMetadata("exif")||{}).orientation||-1;if(Te>=5&&Te<=8){var _e=[me,se];se=_e[0],me=_e[1]}if(!Z(re.file)||$.query("GET_IMAGE_PREVIEW_UPSCALE")){var Oe=2048/se;se*=Oe,me*=Oe}var Qe=me/se,rt=(re.getMetadata("crop")||{}).aspectRatio||Qe,ut=Math.max(pe,Math.min(me,Re)),dt=$.rect.element.width,ft=Math.min(dt*rt,ut);$.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:re.id,height:ft})}}}}})(C,H),C.ref.shouldRescale=!1),C.ref.shouldDrawPreview&&(requestAnimationFrame(function(){requestAnimationFrame(function(){C.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:H.id})})}),C.ref.shouldDrawPreview=!1)))}))}}),{options:{allowImagePreview:[!0,R.BOOLEAN],imagePreviewFilterItem:[function(){return!0},R.FUNCTION],imagePreviewHeight:[null,R.INT],imagePreviewMinHeight:[44,R.INT],imagePreviewMaxHeight:[256,R.INT],imagePreviewMaxFileSize:[null,R.INT],imagePreviewZoomFactor:[2,R.INT],imagePreviewUpscale:[!1,R.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,R.INT],imagePreviewTransparencyIndicator:[null,R.STRING],imagePreviewCalculateAverageImageColor:[!1,R.BOOLEAN],imagePreviewMarkupShow:[!0,R.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},R.FUNCTION]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ct})),ct})})(Rt)),Rt.exports}var ll=ol();const cl=Mt(ll);var Ot={exports:{}};var ul=Ot.exports,sr;function dl(){return sr||(sr=1,(function(e,t){(function(n,r){e.exports=r()})(ul,function(){var n=65496,r=65505,i=1165519206,a=18761,s=274,l=65280,o=function(E,T){var v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return E.getUint16(T,v)},u=function(E,T){var v=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return E.getUint32(T,v)},c=typeof window<"u"&&window.document!==void 0,f=void 0,I=c?new Image:{};I.onload=function(){return f=I.naturalWidth>I.naturalHeight},I.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";var m=function(E){var T=E.addFilter,v=E.utils,D=v.Type,b=v.isFile;return T("DID_LOAD_ITEM",function(B,x){var V=x.query;return new Promise(function(X,te){var N=B.file;if(!(b(N)&&(function(Y){return/^image\/jpeg/.test(Y.type)})(N)&&V("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&f))return X(B);(function(Y){return new Promise(function(K,z){var j=new FileReader;j.onload=function(ue){var A=new DataView(ue.target.result);if(o(A,0)===n){for(var J=A.byteLength,h=2;h<J;){var L=o(A,h);if(h+=2,L===r){if(u(A,h+=2)!==i)break;var q=o(A,h+=6)===a;h+=u(A,h+4,q);var k=o(A,h,q);h+=2;for(var ae=0;ae<k;ae++)if(o(A,h+12*ae,q)===s)return void K(o(A,h+12*ae+8,q))}else{if((L&l)!==l)break;h+=o(A,h)}}K(-1)}else K(-1)},j.readAsArrayBuffer(Y.slice(0,65536))})})(N).then(function(Y){B.setMetadata("exif",{orientation:Y}),X(B)})})}),{options:{allowImageExifOrientation:[!0,D.BOOLEAN]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:m})),m})})(Ot)),Ot.exports}var fl=dl();const El=Mt(fl);var At={exports:{}};var pl=At.exports,ar;function _l(){return ar||(ar=1,(function(e,t){(function(n,r){e.exports=r()})(pl,function(){var n=function(r){var i=r.addFilter,a=r.utils,s=a.Type,l=a.replaceInString,o=a.toNaturalFileSize;return i("ALLOW_HOPPER_ITEM",function(u,c){var f=c.query;if(!f("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var I=f("GET_MAX_FILE_SIZE");if(I!==null&&u.size>I)return!1;var m=f("GET_MIN_FILE_SIZE");return!(m!==null&&u.size<m)}),i("LOAD_FILE",function(u,c){var f=c.query;return new Promise(function(I,m){if(!f("GET_ALLOW_FILE_SIZE_VALIDATION"))return I(u);var E=f("GET_FILE_VALIDATE_SIZE_FILTER");if(E&&!E(u))return I(u);var T=f("GET_MAX_FILE_SIZE");if(T!==null&&u.size>T)m({status:{main:f("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:l(f("GET_LABEL_MAX_FILE_SIZE"),{filesize:o(T,".",f("GET_FILE_SIZE_BASE"),f("GET_FILE_SIZE_LABELS",f))})}});else{var v=f("GET_MIN_FILE_SIZE");if(v!==null&&u.size<v)m({status:{main:f("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:l(f("GET_LABEL_MIN_FILE_SIZE"),{filesize:o(v,".",f("GET_FILE_SIZE_BASE"),f("GET_FILE_SIZE_LABELS",f))})}});else{var D=f("GET_MAX_TOTAL_FILE_SIZE");if(D!==null&&f("GET_ACTIVE_ITEMS").reduce(function(b,B){return b+B.fileSize},0)>D)return void m({status:{main:f("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:l(f("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:o(D,".",f("GET_FILE_SIZE_BASE"),f("GET_FILE_SIZE_LABELS",f))})}});I(u)}}})}),{options:{allowFileSizeValidation:[!0,s.BOOLEAN],maxFileSize:[null,s.INT],minFileSize:[null,s.INT],maxTotalFileSize:[null,s.INT],fileValidateSizeFilter:[null,s.FUNCTION],labelMinFileSizeExceeded:["File is too small",s.STRING],labelMinFileSize:["Minimum file size is {filesize}",s.STRING],labelMaxFileSizeExceeded:["File is too large",s.STRING],labelMaxFileSize:["Maximum file size is {filesize}",s.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",s.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",s.STRING]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n})})(At)),At.exports}var Il=_l();const gl=Mt(Il);var Dt={exports:{}};var ml=Dt.exports,or;function Tl(){return or||(or=1,(function(e,t){(function(n,r){e.exports=r()})(ml,function(){var n=function(){self.onmessage=function(a){i(a.data.message,function(s){self.postMessage({id:a.data.id,message:s})})};var i=function(a,s){var l=a.file,o=new FileReader;o.onloadend=function(){s(o.result.replace("data:","").replace(/^.+,/,""))},o.readAsDataURL(l)}},r=function(i){var a=i.addFilter,s=i.utils,l=s.Type,o=s.createWorker,u=s.createRoute,c=s.isFile,f=function(m){var E=m.name,T=m.file;return new Promise(function(v){var D=o(n);D.post({file:T},function(b){v({name:E,data:b}),D.terminate()})})},I=[];return a("DID_CREATE_ITEM",function(m,E){(0,E.query)("GET_ALLOW_FILE_ENCODE")&&(m.extend("getFileEncodeBase64String",function(){return I[m.id]&&I[m.id].data}),m.extend("getFileEncodeDataURL",function(){return I[m.id]&&"data:".concat(m.fileType,";base64,").concat(I[m.id].data)}))}),a("SHOULD_PREPARE_OUTPUT",function(m,E){var T=E.query;return new Promise(function(v){v(T("GET_ALLOW_FILE_ENCODE"))})}),a("COMPLETE_PREPARE_OUTPUT",function(m,E){var T=E.item,v=E.query;return new Promise(function(D){if(!v("GET_ALLOW_FILE_ENCODE")||!c(m)&&!Array.isArray(m))return D(m);I[T.id]={metadata:T.getMetadata(),data:null},Promise.all((m instanceof Blob?[{name:null,file:m}]:m).map(f)).then(function(b){I[T.id].data=m instanceof Blob?b[0].data:b,D(m)})})}),a("CREATE_VIEW",function(m){var E=m.is,T=m.view,v=m.query;E("file-wrapper")&&v("GET_ALLOW_FILE_ENCODE")&&T.registerWriter(u({DID_PREPARE_OUTPUT:function(D){var b=D.root,B=D.action;if(!v("IS_ASYNC")){var x=v("GET_ITEM",B.id);if(x){var V=I[x.id],X=V.metadata,te=V.data,N=JSON.stringify({id:x.id,name:x.file.name,type:x.file.type,size:x.file.size,metadata:X,data:te});b.ref.data?b.ref.data.value=N:b.dispatch("DID_DEFINE_VALUE",{id:x.id,value:N})}}},DID_REMOVE_ITEM:function(D){var b=D.action,B=v("GET_ITEM",b.id);B&&delete I[B.id]}}))}),{options:{allowFileEncode:[!0,l.BOOLEAN]}}};return typeof window<"u"&&window.document!==void 0&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:r})),r})})(Dt)),Dt.exports}var hl=Tl();const Rl=Mt(hl);class Ol{constructor(){this.init()}init(){if(typeof Bt>"u"){console.warn("Dropzone is not loaded.");return}Bt.autoDiscover=!1;const t=document.querySelectorAll('[data-plugin="dropzone"]');t&&t.forEach(n=>{const r=n.getAttribute("action")||"/",i=n.dataset.previewsContainer,a=n.dataset.uploadPreviewTemplate,s={url:r,acceptedFiles:"image/*"};if(i&&(s.previewsContainer=i),a){const l=document.querySelector(a);l&&(s.previewTemplate=l.innerHTML)}try{new Bt(n,s)}catch(l){console.error("Dropzone initialization failed:",l)}})}}document.addEventListener("DOMContentLoaded",()=>{if(new Ol,typeof sl<"u"){try{vt(cl,El,gl,Rl)}catch(n){console.warn("FilePond plugins registration failed:",n)}document.querySelectorAll("input.filepond-input-multiple").forEach(n=>{et(n)}),document.querySelectorAll("input.filepond-input-circle").forEach(n=>{et(n,{imageCropAspectRatio:"1:1",imageResizeTargetWidth:200,imageResizeTargetHeight:200,stylePanelLayout:"compact circle",styleLoadIndicatorPosition:"center bottom",styleProgressIndicatorPosition:"right bottom",styleButtonRemoveItemPosition:"left bottom",styleButtonProcessItemPosition:"right bottom",allowImagePreview:!0,imagePreviewHeight:100,labelIdle:'<svg  xmlns="http://www.w3.org/2000/svg"  width="32"  height="32"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="text-default-400"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2" /><path d="M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>'})})}else console.warn("FilePond is not loaded.")});
